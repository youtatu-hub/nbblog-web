(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64243193"],{6136:function(t,e,i){},"782f":function(t,e,i){"use strict";i("6136")},bbdc:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._m(0),i("div",{staticClass:"ui attached segment m-padding-bottom-large"},[i("div",{staticClass:"moments"},t._l(t.momentList,(function(e,s){return i("div",{key:s,staticClass:"moment"},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:t.$store.state.introduction.avatar}})]),i("div",{staticClass:"ui card"},[i("div",{staticClass:"content m-top"},[i("span",{staticStyle:{"font-weight":"700"}},[t._v(t._s(t.$store.state.introduction.name))]),i("span",{staticClass:"right floated"},[t._v(t._s(t._f("dateFromNow")(e.createTime)))])]),i("div",{directives:[{name:"lazy-container",rawName:"v-lazy-container",value:{selector:"img"},expression:"{selector: 'img'}"},{name:"viewer",rawName:"v-viewer"}],staticClass:"content typo",class:{privacy:!e.published},domProps:{innerHTML:t._s(e.content)}}),i("div",{staticClass:"extra content"},[i("a",{staticClass:"left floated",on:{click:function(i){return t.like(e.id)}}},[i("i",{staticClass:"heart icon",class:t.isLike(e.id)?"like-color":"outline"}),t._v(t._s(e.likes)+" ")])])])])})),0),i("el-pagination",{staticClass:"pagination",attrs:{"current-page":t.pageNum,"page-count":t.totalPage,layout:"prev, pager, next",background:"","hide-on-single-page":""},on:{"current-change":t.handleCurrentChange}})],1)])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui top attached segment",staticStyle:{"text-align":"center"}},[i("h2",{staticClass:"m-text-500"},[t._v("我的动态")])])}],n=i("be3b");function o(t,e){return Object(n["a"])({url:"moments",method:"GET",headers:{Authorization:t},params:{pageNum:e}})}function r(t){return Object(n["a"])({url:"moment/like/"+t,method:"POST"})}var c={name:"Moments",data(){return{likeMomentIds:JSON.parse(window.localStorage.getItem("likeMomentIds")||"[]"),momentList:[],pageNum:1,totalPage:0}},created(){this.getMomentList()},computed:{isLike(){return function(t){return this.likeMomentIds.indexOf(t)>-1}}},watch:{likeMomentIds(t){window.localStorage.setItem("likeMomentIds",JSON.stringify(t))}},methods:{getMomentList(){const t=window.localStorage.getItem("adminToken"),e=t||"";o(e,this.pageNum).then(t=>{200===t.code?(this.momentList=t.data.list,this.totalPage=t.data.totalPage):this.msgError(t.msg)}).catch(()=>{this.msgError("请求失败")})},handleCurrentChange(t){this.scrollToTop(),this.pageNum=t,this.getMomentList()},like(t){this.likeMomentIds.indexOf(t)>-1?this.$notify({title:"不可以重复点赞哦",type:"warning"}):r(t).then(e=>{200===e.code?(this.$notify({title:e.msg,type:"success"}),this.likeMomentIds.push(t),this.momentList.forEach(e=>{if(e.id===t)return e.likes++})):this.$notify({title:e.msg,type:"warning"})}).catch(()=>{this.$notify({title:"异常错误",type:"error"})})}}},l=c,m=(i("782f"),i("2877")),d=Object(m["a"])(l,s,a,!1,null,"42efd05e",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-64243193.319a5bb8.js.map