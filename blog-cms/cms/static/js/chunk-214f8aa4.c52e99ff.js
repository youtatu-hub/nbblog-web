(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-214f8aa4"],{"00ee":function(e,t,r){var n=r("b622"),o=n("toStringTag"),i={};i[o]="z",e.exports="[object z]"===String(i)},"0366":function(e,t,r){var n=r("1c0b");e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},1119:function(e,t,r){"use strict";r("8a0dd")},2266:function(e,t,r){var n=r("825a"),o=r("e95a"),i=r("50c4"),a=r("0366"),s=r("35a1"),c=r("9bdd"),u=function(e,t){this.stopped=e,this.result=t},l=e.exports=function(e,t,r,l,d){var p,h,f,g,m,y,k,v=a(t,r,l?2:1);if(d)p=e;else{if(h=s(e),"function"!=typeof h)throw TypeError("Target is not iterable");if(o(h)){for(f=0,g=i(e.length);g>f;f++)if(m=l?v(n(k=e[f])[0],k[1]):v(e[f]),m&&m instanceof u)return m;return new u(!1)}p=h.call(e)}y=p.next;while(!(k=y.call(p)).done)if(m=c(p,v,k.value,l),"object"==typeof m&&m&&m instanceof u)return m;return new u(!1)};l.stop=function(e){return new u(!0,e)}},"228c":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",[r("el-select",{staticStyle:{"min-width":"200px"},attrs:{disabled:""},model:{value:e.txyunConfig.bucketName,callback:function(t){e.$set(e.txyunConfig,"bucketName",t)},expression:"txyunConfig.bucketName"}}),r("el-cascader",{staticStyle:{"min-width":"450px"},attrs:{placeholder:"请选择目录",options:e.pathArr,props:e.pathProps},model:{value:e.activePath,callback:function(t){e.activePath=t},expression:"activePath"}}),r("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")]),r("el-button",{staticClass:"right-item",attrs:{type:"primary",size:"medium",icon:"el-icon-upload"},on:{click:function(t){e.isDrawerShow=!e.isDrawerShow}}},[e._v("上传")])],1),e.hintShow1?r("el-alert",{attrs:{title:"只显示<img>标签支持的 apng,avif,bmp,gif,ico,cur,jpg,jpeg,jfif,pjpeg,pjp,png,svg,tif,tiff,webp 格式的图片，见 https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img",type:"warning","show-icon":"","close-text":"不再提示"},on:{close:function(t){return e.noDisplay(1)}}}):e._e(),e.hintShow2?r("el-alert",{attrs:{title:"最多显示100个文件",type:"warning","show-icon":"","close-text":"不再提示"},on:{close:function(t){return e.noDisplay(2)}}}):e._e(),r("el-row",{directives:[{name:"viewer",rawName:"v-viewer"}]},e._l(e.fileList,(function(t,n){return r("div",{key:n,staticClass:"image-container"},[r("el-image",{attrs:{src:t.cdn_url,fit:"scale-down"}}),r("div",{staticClass:"image-content"},[r("div",{staticClass:"info"},[r("span",[e._v(e._s(t.name))])]),r("div",{staticClass:"icons"},[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"复制CDN链接",placement:"bottom"}},[r("i",{staticClass:"icon el-icon-link",on:{click:function(r){return e.copy(1,t)}}})]),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"复制MD格式",placement:"bottom"}},[r("SvgIcon",{attrs:{"icon-class":"markdown","class-name":"icon"},on:{click:function(r){return e.copy(2,t)}}})],1),r("i",{staticClass:"icon el-icon-delete",on:{click:function(r){return e.delFile(t)}}})],1)])],1)})),0),r("el-drawer",{attrs:{title:"上传文件",visible:e.isDrawerShow,direction:"rtl",size:"40%",wrapperClosable:!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.isDrawerShow=t}}},[r("el-row",[r("el-radio",{attrs:{label:"1"},model:{value:e.nameType,callback:function(t){e.nameType=t},expression:"nameType"}},[e._v("使用源文件名")]),r("el-radio",{attrs:{label:"2"},model:{value:e.nameType,callback:function(t){e.nameType=t},expression:"nameType"}},[e._v("使用UUID文件名")]),r("el-button",{directives:[{name:"throttle",rawName:"v-throttle",value:[e.submitUpload,"click",3e3],expression:"[submitUpload,`click`,3000]"}],attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[e._v("确定上传")])],1),r("el-row",[e._v(" 当前目录："+e._s(e.realPath)+" ")]),r("el-row",[r("el-switch",{attrs:{"active-text":"自定义目录"},model:{value:e.isCustomPath,callback:function(t){e.isCustomPath=t},expression:"isCustomPath"}}),r("el-input",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"例：oldFolder/newFolder/",disabled:!e.isCustomPath,size:"medium"},model:{value:e.customPath,callback:function(t){e.customPath=t},expression:"customPath"}})],1),r("el-upload",{ref:"uploadRef",attrs:{action:"","http-request":e.upload,drag:"",multiple:"","file-list":e.uploadList,"list-type":"picture","auto-upload":!1}},[r("i",{staticClass:"el-icon-upload"}),r("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),r("em",[e._v("点击上传")])])])],1)],1)},o=[],i=(r("0643"),r("2382"),r("4e3e"),r("c00a")),a=r("c54a"),s=r("f988"),c=r("f43e"),u=r("40b3"),l=r.n(u),d={name:"TxyunManage",components:{SvgIcon:i["a"]},data(){return{cos:{},txyunConfig:{secretId:"",secretKey:"",bucketName:"",region:"",domain:""},pathArr:[{value:"",label:"根目录"}],activePath:[""],pathProps:{lazy:!0,checkStrictly:!0,lazyLoad:async(e,t)=>{let r=e.path.join("/");r=r.startsWith("/")?r.slice(1):r,""!=r&&(r=r.endsWith("/")?r:r+"/");let n=[];await this.getReposContents(n,r),t(n)}},hintShow1:!0,hintShow2:!0,fileList:[],isDrawerShow:!1,nameType:"1",uploadList:[],isCustomPath:!1,customPath:""}},computed:{realPath(){if(this.isCustomPath)return""+this.customPath;let e=this.activePath.join("/");return e=e.startsWith("/")?e.slice(1):e,""!=e?e+"/":""+e}},created(){this.hintShow1=!localStorage.getItem("txyunHintShow1"),this.hintShow2=!localStorage.getItem("txyunHintShow2");const e=localStorage.getItem("txyunConfig");e?(this.txyunConfig=JSON.parse(e),this.txyunConfig.domain=this.txyunConfig.domain.endsWith("/")?this.txyunConfig.domain:this.txyunConfig.domain+"/",this.cos=new l.a({SecretId:this.txyunConfig.secretId,SecretKey:this.txyunConfig.secretKey})):(this.msgError("请先配置腾讯云"),this.$router.push("/pictureHosting/setting"))},methods:{async getReposContents(e,t){const{txyunConfig:r}=this;await this.cos.getBucket({Bucket:r.bucketName,Region:r.region,Prefix:t,Delimiter:"/"}).then(r=>{r.CommonPrefixes.forEach(r=>{r.name=r.Prefix.replace(t,"").slice(0,-1),e.push({value:r.name,label:r.name,leaf:!1})})})},search(){const{txyunConfig:e}=this,t=[];let r=this.activePath.join("/");r=r.startsWith("/")?r.slice(1):r,""!=r&&(r=r.endsWith("/")?r:r+"/"),this.cos.getBucket({Bucket:e.bucketName,Region:e.region,Prefix:r,Delimiter:"/"}).then(n=>{n.Contents.filter(e=>!e.Key.endsWith("/")&&Object(a["b"])(e.Key)).forEach(n=>{n.path=n.Key,n.cdn_url=`${e.domain}${n.path}`,n.name=n.Key.replace(r,""),t.push(n)})}),this.fileList=t},noDisplay(e){localStorage.setItem("txyunHintShow"+e,"1")},copy(e,t){let r="";1==e?r=t.cdn_url:2==e&&(r=`![${t.name}](${t.cdn_url})`),Object(c["a"])(r),this.msgSuccess("复制成功")},delFile(e){const{txyunConfig:t}=this;this.$confirm("此操作将永久删除该文件, 是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.cos.deleteObject({Bucket:t.bucketName,Region:t.region,Key:e.path}).then(()=>{this.msgSuccess("删除成功"),this.search()}).catch(()=>{this.msgError("删除失败")})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},submitUpload(){this.uploadList=this.$refs.uploadRef.uploadFiles,this.uploadList.length?this.$refs.uploadRef.submit():this.msgError("请先选择文件")},upload(e){let t=e.file.name;"2"===this.nameType&&(t=Object(s["a"])()+t.substr(t.lastIndexOf(".")));const{txyunConfig:r}=this;let n=this.realPath;n=n.startsWith("/")?n.slice(1):n,n=n.endsWith("/")?n:n+"/",this.cos.uploadFile({Bucket:r.bucketName,Region:r.region,Key:`${n}${t}`,Body:e.file,SliceSize:5242880,onProgress:function(e){console.log(JSON.stringify(e))}}).then(()=>{this.msgSuccess("上传成功"),e.onSuccess()})}}},p=d,h=(r("a2e2"),r("1119"),r("2877")),f=Object(h["a"])(p,n,o,!1,null,"d40db2aa",null);t["default"]=f.exports},"35a1":function(e,t,r){var n=r("f5dfe"),o=r("3f8c"),i=r("b622"),a=i("iterator");e.exports=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||o[n(e)]}},"3f8c":function(e,t){e.exports={}},"40b3":function(e,t,r){(function(t,r){e.exports=r()})(0,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s="./index.js")}({"./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./src/cos */"./src/cos.js");e.exports=n},"./lib/base64.js":
/*!***********************!*\
  !*** ./lib/base64.js ***!
  \***********************/
/*! no static exports found */function(e,t){var r=function(e){e=e||{};var t,r=e.Base64,n="2.1.9",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e.charAt(r)]=r;return t}(o),a=String.fromCharCode,s=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?a(192|t>>>6)+a(128|63&t):a(224|t>>>12&15)+a(128|t>>>6&63)+a(128|63&t)}t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return a(240|t>>>18&7)+a(128|t>>>12&63)+a(128|t>>>6&63)+a(128|63&t)},c=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,u=function(e){return e.replace(c,s)},l=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),n=[o.charAt(r>>>18),o.charAt(r>>>12&63),t>=2?"=":o.charAt(r>>>6&63),t>=1?"=":o.charAt(63&r)];return n.join("")},d=e.btoa?function(t){return e.btoa(t)}:function(e){return e.replace(/[\s\S]{1,3}/g,l)},p=t?function(e){return(e.constructor===t.constructor?e:new t(e)).toString("base64")}:function(e){return d(u(e))},h=function(e,t){return t?p(String(e)).replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,""):p(String(e))},f=function(e){return h(e,!0)},g=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),m=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return a(55296+(r>>>10))+a(56320+(1023&r));case 3:return a((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return a((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},y=function(e){return e.replace(g,m)},k=function(e){var t=e.length,r=t%4,n=(t>0?i[e.charAt(0)]<<18:0)|(t>1?i[e.charAt(1)]<<12:0)|(t>2?i[e.charAt(2)]<<6:0)|(t>3?i[e.charAt(3)]:0),o=[a(n>>>16),a(n>>>8&255),a(255&n)];return o.length-=[0,0,2,1][r],o.join("")},v=e.atob?function(t){return e.atob(t)}:function(e){return e.replace(/[\s\S]{1,4}/g,k)},C=t?function(e){return(e.constructor===t.constructor?e:new t(e,"base64")).toString()}:function(e){return y(v(e))},b=function(e){return C(String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))},x=function(){var t=e.Base64;return e.Base64=r,t},S={VERSION:n,atob:v,btoa:d,fromBase64:b,toBase64:h,utob:u,encode:h,encodeURI:f,btou:y,decode:b,noConflict:x};return S}();e.exports=r},"./lib/crypto.js":
/*!***********************!*\
  !*** ./lib/crypto.js ***!
  \***********************/
/*! no static exports found */function(e,t,r){(function(e){var t=r(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js"),n=n||function(e,t){var r={},n=r.lib={},o=function(){},i=n.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=i.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var o=0;o<e;o++)t[n+o>>>2]|=(r[o>>>2]>>>24-o%4*8&255)<<24-(n+o)%4*8;else if(65535<r.length)for(o=0;o<e;o+=4)t[n+o>>>2]=r[o>>>2];else t.push.apply(t,r);return this.sigBytes+=e,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r=[],n=0;n<t;n+=4)r.push(4294967296*e.random()|0);return new a.init(r,t)}}),s=r.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;n<e;n++){var o=t[n>>>2]>>>24-n%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new a.init(r,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;n<e;n++)r.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new a.init(r,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,o=r.sigBytes,i=this.blockSize,s=o/(4*i);s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*i,o=e.min(4*t,o),t){for(var c=0;c<t;c+=i)this._doProcessBlock(n,c);c=n.splice(0,t),r.sigBytes-=o}return new a.init(c,o)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new p.HMAC.init(e,r).finalize(t)}}});var p=r.algo={};return r}(Math);(function(){var e=n,t=e.lib,r=t.WordArray,o=t.Hasher,i=[];t=e.algo.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],o=r[1],a=r[2],s=r[3],c=r[4],u=0;80>u;u++){if(16>u)i[u]=0|e[t+u];else{var l=i[u-3]^i[u-8]^i[u-14]^i[u-16];i[u]=l<<1|l>>>31}l=(n<<5|n>>>27)+c+i[u],l=20>u?l+(1518500249+(o&a|~o&s)):40>u?l+(1859775393+(o^a^s)):60>u?l+((o&a|o&s|a&s)-1894007588):l+((o^a^s)-899497514),c=s,s=a,a=o<<30|o>>>2,o=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+o|0,r[2]=r[2]+a|0,r[3]=r[3]+s|0,r[4]=r[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=o._createHelper(t),e.HmacSHA1=o._createHmacHelper(t)})(),function(){var e=n,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,r){e=this._hasher=new e.init,"string"==typeof r&&(r=t.parse(r));var n=e.blockSize,o=4*n;r.sigBytes>o&&(r=e.finalize(r)),r.clamp();for(var i=this._oKey=r.clone(),a=this._iKey=r.clone(),s=i.words,c=a.words,u=0;u<n;u++)s[u]^=1549556828,c[u]^=909522486;i.sigBytes=a.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=n,t=e.lib,r=t.WordArray,o=e.enc;o.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var o=[],i=0;i<r;i+=3)for(var a=t[i>>>2]>>>24-i%4*8&255,s=t[i+1>>>2]>>>24-(i+1)%4*8&255,c=t[i+2>>>2]>>>24-(i+2)%4*8&255,u=a<<16|s<<8|c,l=0;l<4&&i+.75*l<r;l++)o.push(n.charAt(u>>>6*(3-l)&63));var d=n.charAt(64);if(d)while(o.length%4)o.push(d);return o.join("")},parse:function(e){var t=e.length,n=this._map,o=n.charAt(64);if(o){var i=e.indexOf(o);-1!=i&&(t=i)}for(var a=[],s=0,c=0;c<t;c++)if(c%4){var u=n.indexOf(e.charAt(c-1))<<c%4*2,l=n.indexOf(e.charAt(c))>>>6-c%4*2;a[s>>>2]|=(u|l)<<24-s%4*8,s++}return r.create(a,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),"object"===t(e)?e.exports=n:window.CryptoJS=n}).call(this,r(/*! ./../node_modules/webpack/buildin/module.js */"./node_modules/webpack/buildin/module.js")(e))},"./lib/md5.js":
/*!********************!*\
  !*** ./lib/md5.js ***!
  \********************/
/*! no static exports found */function(e,t,r){(function(e){var t,n=r(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js");(function(){"use strict";var o="object"===("undefined"===typeof window?"undefined":n(window)),i=o?window:{};i.JS_MD5_NO_WINDOW&&(o=!1);var a=!o&&"object"===("undefined"===typeof self?"undefined":n(self));a&&(i=self);var s,c=!i.JS_MD5_NO_COMMON_JS&&"object"===n(e)&&e.exports,u=r(/*! !webpack amd options */"./node_modules/webpack/buildin/amd-options.js"),l=!i.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,d="0123456789abcdef".split(""),p=[128,32768,8388608,-2147483648],h=[0,8,16,24],f=["hex","array","digest","buffer","arrayBuffer","base64"],g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),m=[];if(l){var y=new ArrayBuffer(68);s=new Uint8Array(y),m=new Uint32Array(y)}!i.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!l||!i.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===n(e)&&e.buffer&&e.buffer.constructor===ArrayBuffer});var k=function(e){return function(t,r){return new C(!0).update(t,r)[e]()}},v=function(){var e=k("hex");e.getCtx=e.create=function(){return new C},e.update=function(t){return e.create().update(t)};for(var t=0;t<f.length;++t){var r=f[t];e[r]=k(r)}return e};function C(e){if(e)m[0]=m[16]=m[1]=m[2]=m[3]=m[4]=m[5]=m[6]=m[7]=m[8]=m[9]=m[10]=m[11]=m[12]=m[13]=m[14]=m[15]=0,this.blocks=m,this.buffer8=s;else if(l){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}C.prototype.update=function(e,t){if(!this.finalized){var r,n,o=0,i=e.length,a=this.blocks,s=this.buffer8;while(o<i){if(this.hashed&&(this.hashed=!1,a[0]=a[16],a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),l)for(n=this.start;o<i&&n<64;++o)r=e.charCodeAt(o),t||r<128?s[n++]=r:r<2048?(s[n++]=192|r>>6,s[n++]=128|63&r):r<55296||r>=57344?(s[n++]=224|r>>12,s[n++]=128|r>>6&63,s[n++]=128|63&r):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),s[n++]=240|r>>18,s[n++]=128|r>>12&63,s[n++]=128|r>>6&63,s[n++]=128|63&r);else for(n=this.start;o<i&&n<64;++o)r=e.charCodeAt(o),t||r<128?a[n>>2]|=r<<h[3&n++]:r<2048?(a[n>>2]|=(192|r>>6)<<h[3&n++],a[n>>2]|=(128|63&r)<<h[3&n++]):r<55296||r>=57344?(a[n>>2]|=(224|r>>12)<<h[3&n++],a[n>>2]|=(128|r>>6&63)<<h[3&n++],a[n>>2]|=(128|63&r)<<h[3&n++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),a[n>>2]|=(240|r>>18)<<h[3&n++],a[n>>2]|=(128|r>>12&63)<<h[3&n++],a[n>>2]|=(128|r>>6&63)<<h[3&n++],a[n>>2]|=(128|63&r)<<h[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},C.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=p[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},C.prototype.hash=function(){var e,t,r,n,o,i,a=this.blocks;this.first?(e=a[0]-680876937,e=(e<<7|e>>>25)-271733879<<0,n=(-1732584194^2004318071&e)+a[1]-117830708,n=(n<<12|n>>>20)+e<<0,r=(-271733879^n&(-271733879^e))+a[2]-1126478375,r=(r<<17|r>>>15)+n<<0,t=(e^r&(n^e))+a[3]-1316259209,t=(t<<22|t>>>10)+r<<0):(e=this.h0,t=this.h1,r=this.h2,n=this.h3,e+=(n^t&(r^n))+a[0]-680876936,e=(e<<7|e>>>25)+t<<0,n+=(r^e&(t^r))+a[1]-389564586,n=(n<<12|n>>>20)+e<<0,r+=(t^n&(e^t))+a[2]+606105819,r=(r<<17|r>>>15)+n<<0,t+=(e^r&(n^e))+a[3]-1044525330,t=(t<<22|t>>>10)+r<<0),e+=(n^t&(r^n))+a[4]-176418897,e=(e<<7|e>>>25)+t<<0,n+=(r^e&(t^r))+a[5]+1200080426,n=(n<<12|n>>>20)+e<<0,r+=(t^n&(e^t))+a[6]-1473231341,r=(r<<17|r>>>15)+n<<0,t+=(e^r&(n^e))+a[7]-45705983,t=(t<<22|t>>>10)+r<<0,e+=(n^t&(r^n))+a[8]+1770035416,e=(e<<7|e>>>25)+t<<0,n+=(r^e&(t^r))+a[9]-1958414417,n=(n<<12|n>>>20)+e<<0,r+=(t^n&(e^t))+a[10]-42063,r=(r<<17|r>>>15)+n<<0,t+=(e^r&(n^e))+a[11]-1990404162,t=(t<<22|t>>>10)+r<<0,e+=(n^t&(r^n))+a[12]+1804603682,e=(e<<7|e>>>25)+t<<0,n+=(r^e&(t^r))+a[13]-40341101,n=(n<<12|n>>>20)+e<<0,r+=(t^n&(e^t))+a[14]-1502002290,r=(r<<17|r>>>15)+n<<0,t+=(e^r&(n^e))+a[15]+1236535329,t=(t<<22|t>>>10)+r<<0,e+=(r^n&(t^r))+a[1]-165796510,e=(e<<5|e>>>27)+t<<0,n+=(t^r&(e^t))+a[6]-1069501632,n=(n<<9|n>>>23)+e<<0,r+=(e^t&(n^e))+a[11]+643717713,r=(r<<14|r>>>18)+n<<0,t+=(n^e&(r^n))+a[0]-373897302,t=(t<<20|t>>>12)+r<<0,e+=(r^n&(t^r))+a[5]-701558691,e=(e<<5|e>>>27)+t<<0,n+=(t^r&(e^t))+a[10]+38016083,n=(n<<9|n>>>23)+e<<0,r+=(e^t&(n^e))+a[15]-660478335,r=(r<<14|r>>>18)+n<<0,t+=(n^e&(r^n))+a[4]-405537848,t=(t<<20|t>>>12)+r<<0,e+=(r^n&(t^r))+a[9]+568446438,e=(e<<5|e>>>27)+t<<0,n+=(t^r&(e^t))+a[14]-1019803690,n=(n<<9|n>>>23)+e<<0,r+=(e^t&(n^e))+a[3]-187363961,r=(r<<14|r>>>18)+n<<0,t+=(n^e&(r^n))+a[8]+1163531501,t=(t<<20|t>>>12)+r<<0,e+=(r^n&(t^r))+a[13]-1444681467,e=(e<<5|e>>>27)+t<<0,n+=(t^r&(e^t))+a[2]-51403784,n=(n<<9|n>>>23)+e<<0,r+=(e^t&(n^e))+a[7]+1735328473,r=(r<<14|r>>>18)+n<<0,t+=(n^e&(r^n))+a[12]-1926607734,t=(t<<20|t>>>12)+r<<0,o=t^r,e+=(o^n)+a[5]-378558,e=(e<<4|e>>>28)+t<<0,n+=(o^e)+a[8]-2022574463,n=(n<<11|n>>>21)+e<<0,i=n^e,r+=(i^t)+a[11]+1839030562,r=(r<<16|r>>>16)+n<<0,t+=(i^r)+a[14]-35309556,t=(t<<23|t>>>9)+r<<0,o=t^r,e+=(o^n)+a[1]-1530992060,e=(e<<4|e>>>28)+t<<0,n+=(o^e)+a[4]+1272893353,n=(n<<11|n>>>21)+e<<0,i=n^e,r+=(i^t)+a[7]-155497632,r=(r<<16|r>>>16)+n<<0,t+=(i^r)+a[10]-1094730640,t=(t<<23|t>>>9)+r<<0,o=t^r,e+=(o^n)+a[13]+681279174,e=(e<<4|e>>>28)+t<<0,n+=(o^e)+a[0]-358537222,n=(n<<11|n>>>21)+e<<0,i=n^e,r+=(i^t)+a[3]-722521979,r=(r<<16|r>>>16)+n<<0,t+=(i^r)+a[6]+76029189,t=(t<<23|t>>>9)+r<<0,o=t^r,e+=(o^n)+a[9]-640364487,e=(e<<4|e>>>28)+t<<0,n+=(o^e)+a[12]-421815835,n=(n<<11|n>>>21)+e<<0,i=n^e,r+=(i^t)+a[15]+530742520,r=(r<<16|r>>>16)+n<<0,t+=(i^r)+a[2]-995338651,t=(t<<23|t>>>9)+r<<0,e+=(r^(t|~n))+a[0]-198630844,e=(e<<6|e>>>26)+t<<0,n+=(t^(e|~r))+a[7]+1126891415,n=(n<<10|n>>>22)+e<<0,r+=(e^(n|~t))+a[14]-1416354905,r=(r<<15|r>>>17)+n<<0,t+=(n^(r|~e))+a[5]-57434055,t=(t<<21|t>>>11)+r<<0,e+=(r^(t|~n))+a[12]+1700485571,e=(e<<6|e>>>26)+t<<0,n+=(t^(e|~r))+a[3]-1894986606,n=(n<<10|n>>>22)+e<<0,r+=(e^(n|~t))+a[10]-1051523,r=(r<<15|r>>>17)+n<<0,t+=(n^(r|~e))+a[1]-2054922799,t=(t<<21|t>>>11)+r<<0,e+=(r^(t|~n))+a[8]+1873313359,e=(e<<6|e>>>26)+t<<0,n+=(t^(e|~r))+a[15]-30611744,n=(n<<10|n>>>22)+e<<0,r+=(e^(n|~t))+a[6]-1560198380,r=(r<<15|r>>>17)+n<<0,t+=(n^(r|~e))+a[13]+1309151649,t=(t<<21|t>>>11)+r<<0,e+=(r^(t|~n))+a[4]-145523070,e=(e<<6|e>>>26)+t<<0,n+=(t^(e|~r))+a[11]-1120210379,n=(n<<10|n>>>22)+e<<0,r+=(e^(n|~t))+a[2]+718787259,r=(r<<15|r>>>17)+n<<0,t+=(n^(r|~e))+a[9]-343485551,t=(t<<21|t>>>11)+r<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=r-1732584194<<0,this.h3=n+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+r<<0,this.h3=this.h3+n<<0)},C.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3;return d[e>>4&15]+d[15&e]+d[e>>12&15]+d[e>>8&15]+d[e>>20&15]+d[e>>16&15]+d[e>>28&15]+d[e>>24&15]+d[t>>4&15]+d[15&t]+d[t>>12&15]+d[t>>8&15]+d[t>>20&15]+d[t>>16&15]+d[t>>28&15]+d[t>>24&15]+d[r>>4&15]+d[15&r]+d[r>>12&15]+d[r>>8&15]+d[r>>20&15]+d[r>>16&15]+d[r>>28&15]+d[r>>24&15]+d[n>>4&15]+d[15&n]+d[n>>12&15]+d[n>>8&15]+d[n>>20&15]+d[n>>16&15]+d[n>>28&15]+d[n>>24&15]},C.prototype.toString=C.prototype.hex,C.prototype.digest=function(e){if("hex"===e)return this.hex();this.finalize();var t=this.h0,r=this.h1,n=this.h2,o=this.h3,i=[255&t,t>>8&255,t>>16&255,t>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&o,o>>8&255,o>>16&255,o>>24&255];return i},C.prototype.array=C.prototype.digest,C.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},C.prototype.buffer=C.prototype.arrayBuffer,C.prototype.base64=function(){for(var e,t,r,n="",o=this.array(),i=0;i<15;)e=o[i++],t=o[i++],r=o[i++],n+=g[e>>>2]+g[63&(e<<4|t>>>4)]+g[63&(t<<2|r>>>6)]+g[63&r];return e=o[i],n+=g[e>>>2]+g[e<<4&63]+"==",n};var b=v();c?e.exports=b:(i.md5=b,u&&(t=function(){return b}.call(b,r,b,e),void 0===t||(e.exports=t)))})()}).call(this,r(/*! ./../node_modules/webpack/buildin/module.js */"./node_modules/webpack/buildin/module.js")(e))},"./lib/request.js":
/*!************************!*\
  !*** ./lib/request.js ***!
  \************************/
/*! no static exports found */function(e,t,r){var n=r(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js"),o=function(e){switch(n(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},i=function(e,t,r,i){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===n(e)?Object.keys(e).map((function(n){var i=encodeURIComponent(o(n))+r;return Array.isArray(e[n])?e[n].map((function(e){return i+encodeURIComponent(o(e))})).join(t):i+encodeURIComponent(o(e[n]))})).filter(Boolean).join(t):i?encodeURIComponent(o(i))+r+encodeURIComponent(o(e)):""},a=function(e,t,r){var n={},o=t.getAllResponseHeaders();return o&&o.length>0&&o.trim().split("\n").forEach((function(e){if(e){var t=e.indexOf(":"),r=e.substr(0,t).trim().toLowerCase(),o=e.substr(t+1).trim();n[r]=o}})),{error:e,statusCode:t.status,statusMessage:t.statusText,headers:n,body:r}},s=function(e,t){return t||"text"!==t?e.response:e.responseText},c=function(e,t){var r=(e.method||"GET").toUpperCase(),n=e.url;if(e.qs){var o=i(e.qs);o&&(n+=(-1===n.indexOf("?")?"?":"&")+o)}var c=new XMLHttpRequest;if(c.open(r,n,!0),c.responseType=e.dataType||"text",e.xhrFields)for(var u in e.xhrFields)c[u]=e.xhrFields[u];var l=e.headers;if(l)for(var d in l)l.hasOwnProperty(d)&&"content-length"!==d.toLowerCase()&&"user-agent"!==d.toLowerCase()&&"origin"!==d.toLowerCase()&&"host"!==d.toLowerCase()&&c.setRequestHeader(d,l[d]);return e.onProgress&&c.upload&&(c.upload.onprogress=e.onProgress),e.onDownloadProgress&&(c.onprogress=e.onDownloadProgress),e.timeout&&(c.timeout=e.timeout),c.ontimeout=function(e){var r=new Error("timeout");t(a(r,c))},c.onload=function(){t(a(null,c,s(c,e.dataType)))},c.onerror=function(r){var n=s(c,e.dataType);if(n)t(a(null,c,n));else{var o=c.statusText;o||0!==c.status||(o=new Error("CORS blocked or network error")),t(a(o,c,n))}},c.send(e.body||""),c};e.exports=c},"./node_modules/@babel/runtime/helpers/classCallCheck.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/classCallCheck.js ***!
  \***************************************************************/
/*! no static exports found */function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},"./node_modules/@babel/runtime/helpers/createClass.js":
/*!************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/createClass.js ***!
  \************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./toPropertyKey.js */"./node_modules/@babel/runtime/helpers/toPropertyKey.js");function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":
/*!************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/toPrimitive.js ***!
  \************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./typeof.js */"./node_modules/@babel/runtime/helpers/typeof.js")["default"];function o(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":
/*!**************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/toPropertyKey.js ***!
  \**************************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./typeof.js */"./node_modules/@babel/runtime/helpers/typeof.js")["default"],o=r(/*! ./toPrimitive.js */"./node_modules/@babel/runtime/helpers/toPrimitive.js");function i(e){var t=o(e,"string");return"symbol"===n(t)?t:String(t)}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},"./node_modules/@babel/runtime/helpers/typeof.js":
/*!*******************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/typeof.js ***!
  \*******************************************************/
/*! no static exports found */function(e,t){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports["default"]=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},"./node_modules/fast-xml-parser/src/fxp.js":
/*!*************************************************!*\
  !*** ./node_modules/fast-xml-parser/src/fxp.js ***!
  \*************************************************/
/*! no static exports found */function(e,t,r){"use strict";const n=r(/*! ./validator */"./node_modules/fast-xml-parser/src/validator.js"),o=r(/*! ./xmlparser/XMLParser */"./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js"),i=r(/*! ./xmlbuilder/json2xml */"./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js");e.exports={XMLParser:o,XMLValidator:n,XMLBuilder:i}},"./node_modules/fast-xml-parser/src/util.js":
/*!**************************************************!*\
  !*** ./node_modules/fast-xml-parser/src/util.js ***!
  \**************************************************/
/*! no static exports found */function(e,t,r){"use strict";const n=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",o=n+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",i="["+n+"]["+o+"]*",a=new RegExp("^"+i+"$"),s=function(e,t){const r=[];let n=t.exec(e);while(n){const o=[];o.startIndex=t.lastIndex-n[0].length;const i=n.length;for(let e=0;e<i;e++)o.push(n[e]);r.push(o),n=t.exec(e)}return r},c=function(e){const t=a.exec(e);return!(null===t||"undefined"===typeof t)};t.isExist=function(e){return"undefined"!==typeof e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,r){if(t){const n=Object.keys(t),o=n.length;for(let i=0;i<o;i++)e[n[i]]="strict"===r?[t[n[i]]]:t[n[i]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.isName=c,t.getAllMatches=s,t.nameRegexp=i},"./node_modules/fast-xml-parser/src/validator.js":
/*!*******************************************************!*\
  !*** ./node_modules/fast-xml-parser/src/validator.js ***!
  \*******************************************************/
/*! no static exports found */function(e,t,r){"use strict";const n=r(/*! ./util */"./node_modules/fast-xml-parser/src/util.js"),o={allowBooleanAttributes:!1,unpairedTags:[]};function i(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function a(e,t){const r=t;for(;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{const n=e.substr(r,t-r);if(t>5&&"xml"===n)return g("InvalidXml","XML declaration allowed only at the start of the document.",k(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function s(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let r=1;for(t+=8;t<e.length;t++)if("<"===e[t])r++;else if(">"===e[t]&&(r--,0===r))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}t.validate=function(e,t){t=Object.assign({},o,t);const r=[];let n=!1,c=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let o=0;o<e.length;o++)if("<"===e[o]&&"?"===e[o+1]){if(o+=2,o=a(e,o),o.err)return o}else{if("<"!==e[o]){if(i(e[o]))continue;return g("InvalidChar","char '"+e[o]+"' is not expected.",k(e,o))}{let u=o;if(o++,"!"===e[o]){o=s(e,o);continue}{let d=!1;"/"===e[o]&&(d=!0,o++);let h="";for(;o<e.length&&">"!==e[o]&&" "!==e[o]&&"\t"!==e[o]&&"\n"!==e[o]&&"\r"!==e[o];o++)h+=e[o];if(h=h.trim(),"/"===h[h.length-1]&&(h=h.substring(0,h.length-1),o--),!y(h)){let t;return t=0===h.trim().length?"Invalid space after '<'.":"Tag '"+h+"' is an invalid name.",g("InvalidTag",t,k(e,o))}const m=l(e,o);if(!1===m)return g("InvalidAttr","Attributes for '"+h+"' have open quote.",k(e,o));let v=m.value;if(o=m.index,"/"===v[v.length-1]){const r=o-v.length;v=v.substring(0,v.length-1);const i=p(v,t);if(!0!==i)return g(i.err.code,i.err.msg,k(e,r+i.err.line));n=!0}else if(d){if(!m.tagClosed)return g("InvalidTag","Closing tag '"+h+"' doesn't have proper closing.",k(e,o));if(v.trim().length>0)return g("InvalidTag","Closing tag '"+h+"' can't have attributes or invalid starting.",k(e,u));if(0===r.length)return g("InvalidTag","Closing tag '"+h+"' has not been opened.",k(e,u));{const t=r.pop();if(h!==t.tagName){let r=k(e,t.tagStartPos);return g("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+r.line+", col "+r.col+") instead of closing tag '"+h+"'.",k(e,u))}0==r.length&&(c=!0)}}else{const i=p(v,t);if(!0!==i)return g(i.err.code,i.err.msg,k(e,o-v.length+i.err.line));if(!0===c)return g("InvalidXml","Multiple possible root nodes found.",k(e,o));-1!==t.unpairedTags.indexOf(h)||r.push({tagName:h,tagStartPos:u}),n=!0}for(o++;o<e.length;o++)if("<"===e[o]){if("!"===e[o+1]){o++,o=s(e,o);continue}if("?"!==e[o+1])break;if(o=a(e,++o),o.err)return o}else if("&"===e[o]){const t=f(e,o);if(-1==t)return g("InvalidChar","char '&' is not expected.",k(e,o));o=t}else if(!0===c&&!i(e[o]))return g("InvalidXml","Extra text at the end",k(e,o));"<"===e[o]&&o--}}}return n?1==r.length?g("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",k(e,r[0].tagStartPos)):!(r.length>0)||g("InvalidXml","Invalid '"+JSON.stringify(r.map(e=>e.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):g("InvalidXml","Start tag expected.",1)};const c='"',u="'";function l(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===c||e[t]===u)""===n?n=e[t]:n!==e[t]||(n="");else if(">"===e[t]&&""===n){o=!0;break}r+=e[t]}return""===n&&{value:r,index:t,tagClosed:o}}const d=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function p(e,t){const r=n.getAllMatches(e,d),o={};for(let n=0;n<r.length;n++){if(0===r[n][1].length)return g("InvalidAttr","Attribute '"+r[n][2]+"' has no space in starting.",v(r[n]));if(void 0!==r[n][3]&&void 0===r[n][4])return g("InvalidAttr","Attribute '"+r[n][2]+"' is without value.",v(r[n]));if(void 0===r[n][3]&&!t.allowBooleanAttributes)return g("InvalidAttr","boolean attribute '"+r[n][2]+"' is not allowed.",v(r[n]));const e=r[n][2];if(!m(e))return g("InvalidAttr","Attribute '"+e+"' is an invalid name.",v(r[n]));if(o.hasOwnProperty(e))return g("InvalidAttr","Attribute '"+e+"' is repeated.",v(r[n]));o[e]=1}return!0}function h(e,t){let r=/\d/;for("x"===e[t]&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(r))break}return-1}function f(e,t){if(t++,";"===e[t])return-1;if("#"===e[t])return t++,h(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(";"===e[t])break;return-1}return t}function g(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function m(e){return n.isName(e)}function y(e){return n.isName(e)}function k(e,t){const r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function v(e){return e.startIndex+e[1].length}},"./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js":
/*!*****************************************************************!*\
  !*** ./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js ***!
  \*****************************************************************/
/*! no static exports found */function(e,t,r){"use strict";const n=r(/*! ./orderedJs2Xml */"./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js"),o={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function i(e){this.options=Object.assign({},o,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=c),this.processTextOrObjNode=a,this.options.format?(this.indentate=s,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function a(e,t,r){const n=this.j2x(e,r+1);return void 0!==e[this.options.textNodeName]&&1===Object.keys(e).length?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}function s(e){return this.options.indentBy.repeat(e)}function c(e){return!(!e.startsWith(this.options.attributeNamePrefix)||e===this.options.textNodeName)&&e.substr(this.attrPrefixLen)}i.prototype.build=function(e){return this.options.preserveOrder?n(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)},i.prototype.j2x=function(e,t){let r="",n="";for(let o in e)if(Object.prototype.hasOwnProperty.call(e,o))if("undefined"===typeof e[o])this.isAttribute(o)&&(n+="");else if(null===e[o])this.isAttribute(o)?n+="":"?"===o[0]?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextValNode(e[o],o,"",t);else if("object"!==typeof e[o]){const i=this.isAttribute(o);if(i)r+=this.buildAttrPairStr(i,""+e[o]);else if(o===this.options.textNodeName){let t=this.options.tagValueProcessor(o,""+e[o]);n+=this.replaceEntitiesValue(t)}else n+=this.buildTextValNode(e[o],o,"",t)}else if(Array.isArray(e[o])){const r=e[o].length;let i="";for(let a=0;a<r;a++){const r=e[o][a];"undefined"===typeof r||(null===r?"?"===o[0]?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar:"object"===typeof r?this.options.oneListGroup?i+=this.j2x(r,t+1).val:i+=this.processTextOrObjNode(r,o,t):i+=this.buildTextValNode(r,o,"",t))}this.options.oneListGroup&&(i=this.buildObjectNode(i,o,"",t)),n+=i}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){const t=Object.keys(e[o]),n=t.length;for(let i=0;i<n;i++)r+=this.buildAttrPairStr(t[i],""+e[o][t[i]])}else n+=this.processTextOrObjNode(e[o],o,t);return{attrStr:r,val:n}},i.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&"true"===t?" "+e:" "+e+'="'+t+'"'},i.prototype.buildObjectNode=function(e,t,r,n){if(""===e)return"?"===t[0]?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let o="</"+t+this.tagEndChar,i="";return"?"===t[0]&&(i="?",o=""),!r&&""!==r||-1!==e.indexOf("<")?!1!==this.options.commentPropName&&t===this.options.commentPropName&&0===i.length?this.indentate(n)+`\x3c!--${e}--\x3e`+this.newLine:this.indentate(n)+"<"+t+r+i+this.tagEndChar+e+this.indentate(n)+o:this.indentate(n)+"<"+t+r+i+">"+e+o}},i.prototype.closeTag=function(e){let t="";return-1!==this.options.unpairedTags.indexOf(e)?this.options.suppressUnpairedNode||(t="/"):t=this.options.suppressEmptyNode?"/":"></"+e,t},i.prototype.buildTextValNode=function(e,t,r,n){if(!1!==this.options.cdataPropName&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(!1!==this.options.commentPropName&&t===this.options.commentPropName)return this.indentate(n)+`\x3c!--${e}--\x3e`+this.newLine;if("?"===t[0])return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(t,e);return o=this.replaceEntitiesValue(o),""===o?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+o+"</"+t+this.tagEndChar}},i.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e},e.exports=i},"./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js":
/*!**********************************************************************!*\
  !*** ./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js ***!
  \**********************************************************************/
/*! no static exports found */function(e,t){const r="\n";function n(e,t){let n="";return t.format&&t.indentBy.length>0&&(n=r),o(e,t,"",n)}function o(e,t,r,n){let u="",l=!1;for(let d=0;d<e.length;d++){const p=e[d],h=i(p);if(void 0===h)continue;let f="";if(f=0===r.length?h:`${r}.${h}`,h===t.textNodeName){let e=p[h];s(f,t)||(e=t.tagValueProcessor(h,e),e=c(e,t)),l&&(u+=n),u+=e,l=!1;continue}if(h===t.cdataPropName){l&&(u+=n),u+=`<![CDATA[${p[h][0][t.textNodeName]}]]>`,l=!1;continue}if(h===t.commentPropName){u+=n+`\x3c!--${p[h][0][t.textNodeName]}--\x3e`,l=!0;continue}if("?"===h[0]){const e=a(p[":@"],t),r="?xml"===h?"":n;let o=p[h][0][t.textNodeName];o=0!==o.length?" "+o:"",u+=r+`<${h}${o}${e}?>`,l=!0;continue}let g=n;""!==g&&(g+=t.indentBy);const m=a(p[":@"],t),y=n+`<${h}${m}`,k=o(p[h],t,f,g);-1!==t.unpairedTags.indexOf(h)?t.suppressUnpairedNode?u+=y+">":u+=y+"/>":k&&0!==k.length||!t.suppressEmptyNode?k&&k.endsWith(">")?u+=y+`>${k}${n}</${h}>`:(u+=y+">",k&&""!==n&&(k.includes("/>")||k.includes("</"))?u+=n+t.indentBy+k+n:u+=k,u+=`</${h}>`):u+=y+"/>",l=!0}return u}function i(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const n=t[r];if(e.hasOwnProperty(n)&&":@"!==n)return n}}function a(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){if(!e.hasOwnProperty(n))continue;let o=t.attributeValueProcessor(n,e[n]);o=c(o,t),!0===o&&t.suppressBooleanAttributes?r+=" "+n.substr(t.attributeNamePrefix.length):r+=` ${n.substr(t.attributeNamePrefix.length)}="${o}"`}return r}function s(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function c(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){const n=t.entities[r];e=e.replace(n.regex,n.val)}return e}e.exports=n},"./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js":
/*!*********************************************************************!*\
  !*** ./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js ***!
  \*********************************************************************/
/*! no static exports found */function(e,t,r){const n=r(/*! ../util */"./node_modules/fast-xml-parser/src/util.js");function o(e,t){const r={};if("O"!==e[t+3]||"C"!==e[t+4]||"T"!==e[t+5]||"Y"!==e[t+6]||"P"!==e[t+7]||"E"!==e[t+8])throw new Error("Invalid Tag instead of DOCTYPE");{t+=9;let n=1,o=!1,p=!1,h="";for(;t<e.length;t++)if("<"!==e[t]||p)if(">"===e[t]){if(p?"-"===e[t-1]&&"-"===e[t-2]&&(p=!1,n--):n--,0===n)break}else"["===e[t]?o=!0:h+=e[t];else{if(o&&s(e,t))t+=7,[entityName,val,t]=i(e,t+1),-1===val.indexOf("&")&&(r[d(entityName)]={regx:RegExp(`&${entityName};`,"g"),val:val});else if(o&&c(e,t))t+=8;else if(o&&u(e,t))t+=8;else if(o&&l(e,t))t+=9;else{if(!a)throw new Error("Invalid DOCTYPE");p=!0}n++,h=""}if(0!==n)throw new Error("Unclosed DOCTYPE")}return{entities:r,i:t}}function i(e,t){let r="";for(;t<e.length&&"'"!==e[t]&&'"'!==e[t];t++)r+=e[t];if(r=r.trim(),-1!==r.indexOf(" "))throw new Error("External entites are not supported");const n=e[t++];let o="";for(;t<e.length&&e[t]!==n;t++)o+=e[t];return[r,o,t]}function a(e,t){return"!"===e[t+1]&&"-"===e[t+2]&&"-"===e[t+3]}function s(e,t){return"!"===e[t+1]&&"E"===e[t+2]&&"N"===e[t+3]&&"T"===e[t+4]&&"I"===e[t+5]&&"T"===e[t+6]&&"Y"===e[t+7]}function c(e,t){return"!"===e[t+1]&&"E"===e[t+2]&&"L"===e[t+3]&&"E"===e[t+4]&&"M"===e[t+5]&&"E"===e[t+6]&&"N"===e[t+7]&&"T"===e[t+8]}function u(e,t){return"!"===e[t+1]&&"A"===e[t+2]&&"T"===e[t+3]&&"T"===e[t+4]&&"L"===e[t+5]&&"I"===e[t+6]&&"S"===e[t+7]&&"T"===e[t+8]}function l(e,t){return"!"===e[t+1]&&"N"===e[t+2]&&"O"===e[t+3]&&"T"===e[t+4]&&"A"===e[t+5]&&"T"===e[t+6]&&"I"===e[t+7]&&"O"===e[t+8]&&"N"===e[t+9]}function d(e){if(n.isName(e))return e;throw new Error("Invalid entity name "+e)}e.exports=o},"./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js":
/*!**********************************************************************!*\
  !*** ./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js ***!
  \**********************************************************************/
/*! no static exports found */function(e,t){const r={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},n=function(e){return Object.assign({},r,e)};t.buildOptions=n,t.defaultOptions=r},"./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js":
/*!************************************************************************!*\
  !*** ./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js ***!
  \************************************************************************/
/*! no static exports found */function(e,t,r){"use strict";const n=r(/*! ../util */"./node_modules/fast-xml-parser/src/util.js"),o=r(/*! ./xmlNode */"./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js"),i=r(/*! ./DocTypeReader */"./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js"),a=r(/*! strnum */"./node_modules/strnum/strnum.js");class s{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCharCode(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCharCode(Number.parseInt(t,16))}},this.addExternalEntities=c,this.parseXml=h,this.parseTextData=u,this.resolveNameSpace=l,this.buildAttributesMap=p,this.isItStopNode=y,this.replaceEntitiesValue=g,this.readStopNodeData=b,this.saveTextToParentTag=m,this.addChild=f}}function c(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function u(e,t,r,n,o,i,a){if(void 0!==e&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){a||(e=this.replaceEntitiesValue(e));const n=this.options.tagValueProcessor(t,e,r,o,i);if(null===n||void 0===n)return e;if(typeof n!==typeof e||n!==e)return n;if(this.options.trimValues)return x(e,this.options.parseTagValue,this.options.numberParseOptions);{const t=e.trim();return t===e?x(e,this.options.parseTagValue,this.options.numberParseOptions):e}}}function l(e){if(this.options.removeNSPrefix){const t=e.split(":"),r="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=r+t[1])}return e}const d=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function p(e,t,r){if(!this.options.ignoreAttributes&&"string"===typeof e){const r=n.getAllMatches(e,d),o=r.length,i={};for(let e=0;e<o;e++){const n=this.resolveNameSpace(r[e][1]);let o=r[e][4],a=this.options.attributeNamePrefix+n;if(n.length)if(this.options.transformAttributeName&&(a=this.options.transformAttributeName(a)),"__proto__"===a&&(a="#__proto__"),void 0!==o){this.options.trimValues&&(o=o.trim()),o=this.replaceEntitiesValue(o);const e=this.options.attributeValueProcessor(n,o,t);i[a]=null===e||void 0===e?o:typeof e!==typeof o||e!==o?e:x(o,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[a]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const e={};return e[this.options.attributesGroupName]=i,e}return i}}const h=function(e){e=e.replace(/\r\n?/g,"\n");const t=new o("!xml");let r=t,n="",a="";for(let s=0;s<e.length;s++){const c=e[s];if("<"===c)if("/"===e[s+1]){const t=v(e,">",s,"Closing Tag is not closed.");let o=e.substring(s+2,t).trim();if(this.options.removeNSPrefix){const e=o.indexOf(":");-1!==e&&(o=o.substr(e+1))}this.options.transformTagName&&(o=this.options.transformTagName(o)),r&&(n=this.saveTextToParentTag(n,r,a));const i=a.substring(a.lastIndexOf(".")+1);if(o&&-1!==this.options.unpairedTags.indexOf(o))throw new Error(`Unpaired tag can not be used as closing tag: </${o}>`);let c=0;i&&-1!==this.options.unpairedTags.indexOf(i)?(c=a.lastIndexOf(".",a.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=a.lastIndexOf("."),a=a.substring(0,c),r=this.tagsNodeStack.pop(),n="",s=t}else if("?"===e[s+1]){let t=C(e,s,!1,"?>");if(!t)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,a),this.options.ignoreDeclaration&&"?xml"===t.tagName||this.options.ignorePiTags);else{const e=new o(t.tagName);e.add(this.options.textNodeName,""),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[":@"]=this.buildAttributesMap(t.tagExp,a,t.tagName)),this.addChild(r,e,a)}s=t.closeIndex+1}else if("!--"===e.substr(s+1,3)){const t=v(e,"--\x3e",s+4,"Comment is not closed.");if(this.options.commentPropName){const o=e.substring(s+4,t-2);n=this.saveTextToParentTag(n,r,a),r.add(this.options.commentPropName,[{[this.options.textNodeName]:o}])}s=t}else if("!D"===e.substr(s+1,2)){const t=i(e,s);this.docTypeEntities=t.entities,s=t.i}else if("!["===e.substr(s+1,2)){const t=v(e,"]]>",s,"CDATA is not closed.")-2,o=e.substring(s+9,t);n=this.saveTextToParentTag(n,r,a);let i=this.parseTextData(o,r.tagname,a,!0,!1,!0,!0);void 0==i&&(i=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:o}]):r.add(this.options.textNodeName,i),s=t+2}else{let i=C(e,s,this.options.removeNSPrefix),c=i.tagName;const u=i.rawTagName;let l=i.tagExp,d=i.attrExpPresent,p=i.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&n&&"!xml"!==r.tagname&&(n=this.saveTextToParentTag(n,r,a,!1));const h=r;if(h&&-1!==this.options.unpairedTags.indexOf(h.tagname)&&(r=this.tagsNodeStack.pop(),a=a.substring(0,a.lastIndexOf("."))),c!==t.tagname&&(a+=a?"."+c:c),this.isItStopNode(this.options.stopNodes,a,c)){let t="";if(l.length>0&&l.lastIndexOf("/")===l.length-1)"/"===c[c.length-1]?(c=c.substr(0,c.length-1),a=a.substr(0,a.length-1),l=c):l=l.substr(0,l.length-1),s=i.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(c))s=i.closeIndex;else{const r=this.readStopNodeData(e,u,p+1);if(!r)throw new Error("Unexpected end of "+u);s=r.i,t=r.tagContent}const n=new o(c);c!==l&&d&&(n[":@"]=this.buildAttributesMap(l,a,c)),t&&(t=this.parseTextData(t,c,a,!0,d,!0,!0)),a=a.substr(0,a.lastIndexOf(".")),n.add(this.options.textNodeName,t),this.addChild(r,n,a)}else{if(l.length>0&&l.lastIndexOf("/")===l.length-1){"/"===c[c.length-1]?(c=c.substr(0,c.length-1),a=a.substr(0,a.length-1),l=c):l=l.substr(0,l.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));const e=new o(c);c!==l&&d&&(e[":@"]=this.buildAttributesMap(l,a,c)),this.addChild(r,e,a),a=a.substr(0,a.lastIndexOf("."))}else{const e=new o(c);this.tagsNodeStack.push(r),c!==l&&d&&(e[":@"]=this.buildAttributesMap(l,a,c)),this.addChild(r,e,a),r=e}n="",s=p}}else n+=e[s]}return t.child};function f(e,t,r){const n=this.options.updateTag(t.tagname,r,t[":@"]);!1===n||("string"===typeof n?(t.tagname=n,e.addChild(t)):e.addChild(t))}const g=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){const r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function m(e,t,r,n){return e&&(void 0===n&&(n=0===Object.keys(t.child).length),e=this.parseTextData(e,t.tagname,r,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,n),void 0!==e&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function y(e,t,r){const n="*."+r;for(const o in e){const r=e[o];if(n===r||t===r)return!0}return!1}function k(e,t,r=">"){let n,o="";for(let i=t;i<e.length;i++){let t=e[i];if(n)t===n&&(n="");else if('"'===t||"'"===t)n=t;else if(t===r[0]){if(!r[1])return{data:o,index:i};if(e[i+1]===r[1])return{data:o,index:i}}else"\t"===t&&(t=" ");o+=t}}function v(e,t,r,n){const o=e.indexOf(t,r);if(-1===o)throw new Error(n);return o+t.length-1}function C(e,t,r,n=">"){const o=k(e,t+1,n);if(!o)return;let i=o.data;const a=o.index,s=i.search(/\s/);let c=i,u=!0;-1!==s&&(c=i.substring(0,s),i=i.substring(s+1).trimStart());const l=c;if(r){const e=c.indexOf(":");-1!==e&&(c=c.substr(e+1),u=c!==o.data.substr(e+1))}return{tagName:c,tagExp:i,closeIndex:a,attrExpPresent:u,rawTagName:l}}function b(e,t,r){const n=r;let o=1;for(;r<e.length;r++)if("<"===e[r])if("/"===e[r+1]){const i=v(e,">",r,t+" is not closed");let a=e.substring(r+2,i).trim();if(a===t&&(o--,0===o))return{tagContent:e.substring(n,r),i:i};r=i}else if("?"===e[r+1]){const t=v(e,"?>",r+1,"StopNode is not closed.");r=t}else if("!--"===e.substr(r+1,3)){const t=v(e,"--\x3e",r+3,"StopNode is not closed.");r=t}else if("!["===e.substr(r+1,2)){const t=v(e,"]]>",r,"StopNode is not closed.")-2;r=t}else{const n=C(e,r,">");if(n){const e=n&&n.tagName;e===t&&"/"!==n.tagExp[n.tagExp.length-1]&&o++,r=n.closeIndex}}}function x(e,t,r){if(t&&"string"===typeof e){const t=e.trim();return"true"===t||"false"!==t&&a(e,r)}return n.isExist(e)?e:""}e.exports=s},"./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js":
/*!*****************************************************************!*\
  !*** ./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js ***!
  \*****************************************************************/
/*! no static exports found */function(e,t,r){const{buildOptions:n}=r(/*! ./OptionsBuilder */"./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js"),o=r(/*! ./OrderedObjParser */"./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js"),{prettify:i}=r(/*! ./node2json */"./node_modules/fast-xml-parser/src/xmlparser/node2json.js"),a=r(/*! ../validator */"./node_modules/fast-xml-parser/src/validator.js");class s{constructor(e){this.externalEntities={},this.options=n(e)}parse(e,t){if("string"===typeof e);else{if(!e.toString)throw new Error("XML data is accepted in String or Bytes[] form.");e=e.toString()}if(t){!0===t&&(t={});const r=a.validate(e,t);if(!0!==r)throw Error(`${r.err.msg}:${r.err.line}:${r.err.col}`)}const r=new o(this.options);r.addExternalEntities(this.externalEntities);const n=r.parseXml(e);return this.options.preserveOrder||void 0===n?n:i(n,this.options)}addEntity(e,t){if(-1!==t.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===t)throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}}e.exports=s},"./node_modules/fast-xml-parser/src/xmlparser/node2json.js":
/*!*****************************************************************!*\
  !*** ./node_modules/fast-xml-parser/src/xmlparser/node2json.js ***!
  \*****************************************************************/
/*! no static exports found */function(e,t,r){"use strict";function n(e,t){return o(e,t)}function o(e,t,r){let n;const c={};for(let u=0;u<e.length;u++){const l=e[u],d=i(l);let p="";if(p=void 0===r?d:r+"."+d,d===t.textNodeName)void 0===n?n=l[d]:n+=""+l[d];else{if(void 0===d)continue;if(l[d]){let e=o(l[d],t,p);const r=s(e,t);l[":@"]?a(e,l[":@"],p,t):1!==Object.keys(e).length||void 0===e[t.textNodeName]||t.alwaysCreateTextNode?0===Object.keys(e).length&&(t.alwaysCreateTextNode?e[t.textNodeName]="":e=""):e=e[t.textNodeName],void 0!==c[d]&&c.hasOwnProperty(d)?(Array.isArray(c[d])||(c[d]=[c[d]]),c[d].push(e)):t.isArray(d,p,r)?c[d]=[e]:c[d]=e}}}return"string"===typeof n?n.length>0&&(c[t.textNodeName]=n):void 0!==n&&(c[t.textNodeName]=n),c}function i(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const e=t[r];if(":@"!==e)return e}}function a(e,t,r,n){if(t){const o=Object.keys(t),i=o.length;for(let a=0;a<i;a++){const i=o[a];n.isArray(i,r+"."+i,!0,!0)?e[i]=[t[i]]:e[i]=t[i]}}}function s(e,t){const{textNodeName:r}=t,n=Object.keys(e).length;return 0===n||!(1!==n||!e[r]&&"boolean"!==typeof e[r]&&0!==e[r])}t.prettify=n},"./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js":
/*!***************************************************************!*\
  !*** ./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js ***!
  \***************************************************************/
/*! no static exports found */function(e,t,r){"use strict";class n{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){"__proto__"===e&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,[":@"]:e[":@"]}):this.child.push({[e.tagname]:e.child})}}e.exports=n},"./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function c(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(function(){try{r="function"===typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"===typeof clearTimeout?clearTimeout:a}catch(e){n=a}})();var u,l=[],d=!1,p=-1;function h(){d&&u&&(d=!1,u.length?l=u.concat(l):p=-1,l.length&&f())}function f(){if(!d){var e=s(h);d=!0;var t=l.length;while(t){u=l,l=[];while(++p<t)u&&u[p].run();p=-1,t=l.length}u=null,d=!1,c(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new g(e,t)),1!==l.length||d||s(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},"./node_modules/strnum/strnum.js":
/*!***************************************!*\
  !*** ./node_modules/strnum/strnum.js ***!
  \***************************************/
/*! no static exports found */function(e,t){const r=/^[-+]?0x[a-fA-F0-9]+$/,n=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const o={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function i(e,t={}){if(t=Object.assign({},o,t),!e||"string"!==typeof e)return e;let i=e.trim();if(void 0!==t.skipLike&&t.skipLike.test(i))return e;if(t.hex&&r.test(i))return Number.parseInt(i,16);{const r=n.exec(i);if(r){const n=r[1],o=r[2];let s=a(r[3]);const c=r[4]||r[6];if(!t.leadingZeros&&o.length>0&&n&&"."!==i[2])return e;if(!t.leadingZeros&&o.length>0&&!n&&"."!==i[1])return e;{const r=Number(i),a=""+r;return-1!==a.search(/[eE]/)||c?t.eNotation?r:e:-1!==i.indexOf(".")?"0"===a&&""===s||a===s||n&&a==="-"+s?r:e:o?s===a||n+s===a?r:e:i===a||i===n+a?r:e}}return e}}function a(e){return e&&-1!==e.indexOf(".")?(e=e.replace(/0+$/,""),"."===e?e="0":"."===e[0]?e="0"+e:"."===e[e.length-1]&&(e=e.substr(0,e.length-1)),e):e}e.exports=i},"./node_modules/webpack/buildin/amd-options.js":
/*!****************************************!*\
  !*** (webpack)/buildin/amd-options.js ***!
  \****************************************/
/*! no static exports found */function(e,t){(function(t){e.exports=t}).call(this,{})},"./node_modules/webpack/buildin/module.js":
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/*! no static exports found */function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"./package.json":
/*!**********************!*\
  !*** ./package.json ***!
  \**********************/
/*! exports provided: name, version, description, main, types, scripts, repository, keywords, author, license, bugs, homepage, dependencies, devDependencies, default */function(e){e.exports=JSON.parse('{"name":"cos-js-sdk-v5","version":"1.8.6","description":"JavaScript SDK for [腾讯云对象存储](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"prettier":"prettier --write src demo/demo.js demo/CIDemos/*.js test/test.js server/sts.js lib/request.js index.d.ts","server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m","test":"jest --runInBand --coverage"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"fast-xml-parser":"^4.4.0"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","prettier":"^3.0.1","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","uglifyjs":"^2.4.11","webpack":"4.46.0","webpack-cli":"4.10.0"}}')},"./src/advance.js":
/*!************************!*\
  !*** ./src/advance.js ***!
  \************************/
/*! no static exports found */function(e,t,r){var n=r(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js"),o=r(/*! ./session */"./src/session.js"),i=r(/*! ./async */"./src/async.js"),a=r(/*! ./event */"./src/event.js").EventProxy,s=r(/*! ./util */"./src/util.js"),c=r(/*! ./tracker */"./src/tracker.js");function u(e,t){var r,n,i=this,c=new a,u=e.TaskId,d=e.Bucket,p=e.Region,f=e.Key,m=e.Body,y=e.ChunkSize||e.SliceSize||i.options.ChunkSize,k=e.AsyncLimit,v=e.StorageClass,C=e.ServerSideEncryption,b=e.onHashProgress,x=e.tracker;x&&x.setParams({chunkSize:y}),c.on("error",(function(r){if(i._isRunningTask(u))return e.UploadData.UploadId&&o.removeUsing(e.UploadData.UploadId),r.UploadId=e.UploadData.UploadId||"",t(r)})),c.on("upload_complete",(function(r){var n=s.extend({UploadId:e.UploadData.UploadId||""},r);t(null,n)})),c.on("upload_slice_complete",(function(t){var a={};s.each(e.Headers,(function(e,t){var r=t.toLowerCase();(0===r.indexOf("x-cos-meta-")||["pic-operations","x-cos-callback","x-cos-callback-var","x-cos-return-body"].includes(r))&&(a[t]=e)})),g.call(i,{Bucket:d,Region:p,Key:f,UploadId:t.UploadId,SliceList:t.SliceList,Headers:a,tracker:x},(function(e,a){if(i._isRunningTask(u)){if(o.removeUsing(t.UploadId),e)return n(null,!0),c.emit("error",e);o.removeUploadId.call(i,t.UploadId),n({loaded:r,total:r},!0),c.emit("upload_complete",a)}}))})),c.on("get_upload_data_finish",(function(t){var a=o.getFileId(m,e.ChunkSize,d,f);a&&o.saveUploadId.call(i,a,t.UploadId,i.options.UploadIdCacheLimit),o.setUsing(t.UploadId),n(null,!0),h.call(i,{TaskId:u,Bucket:d,Region:p,Key:f,Body:m,FileSize:r,SliceSize:y,AsyncLimit:k,ServerSideEncryption:C,UploadData:t,Headers:e.Headers,onProgress:n,tracker:x},(function(e,t){if(i._isRunningTask(u))return e?(n(null,!0),c.emit("error",e)):void c.emit("upload_slice_complete",t)}))})),c.on("get_file_size_finish",(function(){if(n=s.throttleOnProgress.call(i,r,e.onProgress),e.UploadData.UploadId)c.emit("get_upload_data_finish",e.UploadData);else{var t=s.extend({TaskId:u,Bucket:d,Region:p,Key:f,Headers:e.Headers,StorageClass:v,Body:m,FileSize:r,SliceSize:y,onHashProgress:b,tracker:x},e);l.call(i,t,(function(t,r){if(i._isRunningTask(u)){if(t)return c.emit("error",t);e.UploadData.UploadId=r.UploadId,e.UploadData.PartList=r.PartList,c.emit("get_upload_data_finish",e.UploadData)}}))}})),r=e.ContentLength,delete e.ContentLength,!e.Headers&&(e.Headers={}),s.each(e.Headers,(function(t,r){"content-length"===r.toLowerCase()&&delete e.Headers[r]})),function(){for(var t=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],n=1048576,o=0;o<t.length;o++)if(n=1024*t[o]*1024,r/n<=i.options.MaxPartNumber)break;e.ChunkSize=e.SliceSize=y=Math.max(y,n)}(),0===r?(e.Body="",e.ContentLength=0,e.SkipTask=!0,i.putObject(e,t)):c.emit("get_file_size_finish")}function l(e,t){var r=e.TaskId,n=e.Bucket,c=e.Region,u=e.Key,l=e.StorageClass,h=this,f={},g=e.FileSize,m=e.SliceSize,y=Math.ceil(g/m),k=0,v=s.throttleOnProgress.call(h,g,e.onHashProgress),C=function(t,r){var n=m*(t-1),o=Math.min(n+m,g),i=o-n;f[t]?r(null,{PartNumber:t,ETag:f[t],Size:i}):s.fileSlice(e.Body,n,o,!1,(function(e){s.getFileMd5(e,(function(e,n){if(e)return r(s.error(e));var o='"'+n+'"';f[t]=o,1,k+=i,v({loaded:k,total:g}),r(null,{PartNumber:t,ETag:o,Size:i})}))}))},b=function(e,t){var r=e.length;if(0===r)return t(null,!0);if(r>y)return t(null,!1);if(r>1){var n=Math.max(e[0].Size,e[1].Size);if(n!==m)return t(null,!1)}var o=function n(o){if(o<r){var i=e[o];C(i.PartNumber,(function(e,r){r&&r.ETag===i.ETag&&r.Size===i.Size?n(o+1):t(null,!1)}))}else t(null,!0)};o(0)},x=new a;x.on("error",(function(e){if(h._isRunningTask(r))return t(e)})),x.on("upload_id_available",(function(e){var r={},n=[];s.each(e.PartList,(function(e){r[e.PartNumber]=e}));for(var o=1;o<=y;o++){var i=r[o];i?(i.PartNumber=o,i.Uploaded=!0):i={PartNumber:o,ETag:null,Uploaded:!1},n.push(i)}e.PartList=n,t(null,e)})),x.on("no_available_upload_id",(function(){if(h._isRunningTask(r)){var o=s.extend({Bucket:n,Region:c,Key:u,Query:s.clone(e.Query),StorageClass:l,Body:e.Body,calledBySdk:"sliceUploadFile",tracker:e.tracker},e),i=s.clone(e.Headers);delete i["x-cos-mime-limit"],o.Headers=i,h.multipartInit(o,(function(e,n){if(h._isRunningTask(r)){if(e)return x.emit("error",e);var o=n.UploadId;if(!o)return t(s.error(new Error("no such upload id")));x.emit("upload_id_available",{UploadId:o,PartList:[]})}}))}})),x.on("has_and_check_upload_id",(function(t){t=t.reverse(),i.eachLimit(t,1,(function(t,i){h._isRunningTask(r)&&(o.using[t]?i():p.call(h,{Bucket:n,Region:c,Key:u,UploadId:t,tracker:e.tracker},(function(e,n){if(h._isRunningTask(r)){if(e)return o.removeUsing(t),x.emit("error",e);var a=n.PartList;a.forEach((function(e){e.PartNumber*=1,e.Size*=1,e.ETag=e.ETag||""})),b(a,(function(e,n){if(h._isRunningTask(r))return e?x.emit("error",e):void(n?i({UploadId:t,PartList:a}):i())}))}})))}),(function(e){h._isRunningTask(r)&&(v(null,!0),e&&e.UploadId?x.emit("upload_id_available",e):x.emit("no_available_upload_id"))}))})),x.on("seek_local_avail_upload_id",(function(t){var i=o.getFileId(e.Body,e.ChunkSize,n,u),a=o.getUploadIdList.call(h,i);if(i&&a){var l=function i(l){if(l>=a.length)x.emit("has_and_check_upload_id",t);else{var d=a[l];if(!s.isInArray(t,d))return o.removeUploadId.call(h,d),void i(l+1);o.using[d]?i(l+1):p.call(h,{Bucket:n,Region:c,Key:u,UploadId:d,tracker:e.tracker},(function(e,t){h._isRunningTask(r)&&(e?(o.removeUploadId.call(h,d),i(l+1)):x.emit("upload_id_available",{UploadId:d,PartList:t.PartList}))}))}};l(0)}else x.emit("has_and_check_upload_id",t)})),x.on("get_remote_upload_id_list",(function(){d.call(h,{Bucket:n,Region:c,Key:u,tracker:e.tracker},(function(t,i){if(h._isRunningTask(r)){if(t)return x.emit("error",t);var a=s.filter(i.UploadList,(function(e){return e.Key===u&&(!l||e.StorageClass.toUpperCase()===l.toUpperCase())})).reverse().map((function(e){return e.UploadId||e.UploadID}));if(a.length)x.emit("seek_local_avail_upload_id",a);else{var c,d=o.getFileId(e.Body,e.ChunkSize,n,u);d&&(c=o.getUploadIdList.call(h,d))&&s.each(c,(function(e){o.removeUploadId.call(h,e)})),x.emit("no_available_upload_id")}}}))})),x.emit("get_remote_upload_id_list")}function d(e,t){var r=this,n=[],o={Bucket:e.Bucket,Region:e.Region,Prefix:e.Key,calledBySdk:e.calledBySdk||"sliceUploadFile",tracker:e.tracker},i=function e(){r.multipartList(o,(function(r,i){if(r)return t(r);n.push.apply(n,i.Upload||[]),"true"===i.IsTruncated?(o.KeyMarker=i.NextKeyMarker,o.UploadIdMarker=i.NextUploadIdMarker,e()):t(null,{UploadList:n})}))};i()}function p(e,t){var r=this,n=[],o={Bucket:e.Bucket,Region:e.Region,Key:e.Key,UploadId:e.UploadId,calledBySdk:"sliceUploadFile",tracker:e.tracker},i=function e(){r.multipartListPart(o,(function(r,i){if(r)return t(r);n.push.apply(n,i.Part||[]),"true"===i.IsTruncated?(o.PartNumberMarker=i.NextPartNumberMarker,e()):t(null,{PartList:n})}))};i()}function h(e,t){var r=this,n=e.TaskId,o=e.Bucket,a=e.Region,c=e.Key,u=e.UploadData,l=e.FileSize,d=e.SliceSize,p=Math.min(e.AsyncLimit||r.options.ChunkParallelLimit||1,256),h=e.Body,g=Math.ceil(l/d),m=0,y=e.ServerSideEncryption,k=e.Headers,v=s.filter(u.PartList,(function(e){return e["Uploaded"]&&(m+=e["PartNumber"]>=g&&l%d||d),!e["Uploaded"]})),C=e.onProgress;i.eachLimit(v,p,(function(t,i){if(r._isRunningTask(n)){var s=t["PartNumber"],p=Math.min(l,t["PartNumber"]*d)-(t["PartNumber"]-1)*d,g=0;f.call(r,{TaskId:n,Bucket:o,Region:a,Key:c,SliceSize:d,FileSize:l,PartNumber:s,ServerSideEncryption:y,Body:h,UploadData:u,Headers:k,onProgress:function(e){m+=e.loaded-g,g=e.loaded,C({loaded:m,total:l})},tracker:e.tracker},(function(e,o){r._isRunningTask(n)&&(e||o.ETag||(e='get ETag error, please add "ETag" to CORS ExposeHeader setting.( 获取ETag失败，请在CORS ExposeHeader设置中添加ETag，请参考文档：https://cloud.tencent.com/document/product/436/13318 )'),e?m-=g:(m+=p-g,t.ETag=o.ETag),C({loaded:m,total:l}),i(e||null,o))}))}}),(function(e){if(r._isRunningTask(n))return e?t(e):void t(null,{UploadId:u.UploadId,SliceList:u.PartList})}))}function f(e,t){var r=this,n=e.TaskId,o=e.Bucket,a=e.Region,c=e.Key,u=e.FileSize,l=e.Body,d=1*e.PartNumber,p=e.SliceSize,h=e.ServerSideEncryption,f=e.UploadData,g=e.Headers||{},m=r.options.ChunkRetryTimes+1,y=p*(d-1),k=p,v=y+p;v>u&&(v=u,k=v-y);var C=["x-cos-traffic-limit","x-cos-mime-limit"],b={};s.each(g,(function(e,t){C.indexOf(t)>-1&&(b[t]=e)}));var x=f.PartList[d-1];i.retry(m,(function(t){r._isRunningTask(n)&&s.fileSlice(l,y,v,!0,(function(i){r.multipartUpload({TaskId:n,Bucket:o,Region:a,Key:c,ContentLength:k,PartNumber:d,UploadId:f.UploadId,ServerSideEncryption:h,Body:i,Headers:b,onProgress:e.onProgress,calledBySdk:"sliceUploadFile",tracker:e.tracker},(function(e,o){if(r._isRunningTask(n))return e?t(e):(x.Uploaded=!0,t(null,o))}))}))}),(function(e,o){if(r._isRunningTask(n))return t(e,o)}))}function g(e,t){var r=e.Bucket,n=e.Region,o=e.Key,a=e.UploadId,s=e.SliceList,c=this,u=this.options.ChunkRetryTimes+1,l=e.Headers,d=s.map((function(e){return{PartNumber:e.PartNumber,ETag:e.ETag}}));i.retry(u,(function(t){c.multipartComplete({Bucket:r,Region:n,Key:o,UploadId:a,Parts:d,Headers:l,calledBySdk:"sliceUploadFile",tracker:e.tracker},t)}),(function(e,r){t(e,r)}))}function m(e,t){var r=e.Bucket,n=e.Region,o=e.Key,i=e.UploadId,c=e.Level||"task",u=e.AsyncLimit,l=this,p=new a;if(p.on("error",(function(e){return t(e)})),p.on("get_abort_array",(function(i){y.call(l,{Bucket:r,Region:n,Key:o,Headers:e.Headers,AsyncLimit:u,AbortArray:i},t)})),"bucket"===c)d.call(l,{Bucket:r,Region:n,calledBySdk:"abortUploadTask"},(function(e,r){if(e)return t(e);p.emit("get_abort_array",r.UploadList||[])}));else if("file"===c){if(!o)return t(s.error(new Error("abort_upload_task_no_key")));d.call(l,{Bucket:r,Region:n,Key:o,calledBySdk:"abortUploadTask"},(function(e,r){if(e)return t(e);p.emit("get_abort_array",r.UploadList||[])}))}else{if("task"!==c)return t(s.error(new Error("abort_unknown_level")));if(!i)return t(s.error(new Error("abort_upload_task_no_id")));if(!o)return t(s.error(new Error("abort_upload_task_no_key")));p.emit("get_abort_array",[{Key:o,UploadId:i}])}}function y(e,t){var r=e.Bucket,n=e.Region,o=e.Key,a=e.AbortArray,s=e.AsyncLimit||1,c=this,u=0,l=new Array(a.length);i.eachLimit(a,s,(function(t,i){var a=u;if(o&&o!==t.Key)return l[a]={error:{KeyNotMatch:!0}},void i(null);var s=t.UploadId||t.UploadID;c.multipartAbort({Bucket:r,Region:n,Key:t.Key,Headers:e.Headers,UploadId:s},(function(e){var o={Bucket:r,Region:n,Key:t.Key,UploadId:s};l[a]={error:e,task:o},i(null)})),u++}),(function(e){if(e)return t(e);for(var r=[],n=[],o=0,i=l.length;o<i;o++){var a=l[o];a["task"]&&(a["error"]?n.push(a["task"]):r.push(a["task"]))}return t(null,{successList:r,errorList:n})}))}function k(e,t){var r=this,o=void 0===e.SliceSize?r.options.SliceSize:e.SliceSize,i=[],a=e.Body,u=a.size||a.length||0,l={TaskId:""};if(r.options.EnableReporter){var d=r.options.UseAccelerate||"string"===typeof r.options.Domain&&r.options.Domain.includes("accelerate."),p=u>o?"sliceUploadFile":"putObject";e.tracker=new c({Beacon:r.options.BeaconReporter,clsReporter:r.options.ClsReporter,bucket:e.Bucket,region:e.Region,apiName:"uploadFile",realApi:p,fileKey:e.Key,fileSize:u,accelerate:d,deepTracker:r.options.DeepTracker,customId:r.options.CustomId,delay:r.options.TrackerDelay})}s.each(e,(function(e,t){"object"!==n(e)&&"function"!==typeof e&&(l[t]=e)}));var h=e.onTaskReady,f=function(e){l.TaskId=e,h&&h(e)};e.onTaskReady=f;var g=u>o?"sliceUploadFile":"putObject",m=e.onFileFinish,y=function(r,n){e.tracker&&e.tracker.report(r,n),m&&m(r,n,l),t&&t(r,n)};i.push({api:g,params:e,callback:y}),r._addTasks(i)}function v(e,t){var r=this,o=void 0===e.SliceSize?r.options.SliceSize:e.SliceSize,i=0,a=0,u=s.throttleOnProgress.call(r,a,e.onProgress),l=e.files.length,d=e.onFileFinish,p=Array(l),h=function(e,r,n){u(null,!0),d&&d(e,r,n),p[n.Index]={options:n,error:e,data:r},--l<=0&&t&&t(null,{files:p})},f=[];s.each(e.files,(function(e,t){(function(){var l=e.Body,d=l.size||l.length||0,p={Index:t,TaskId:""};if(!r.options.UseRawKey&&e.Key&&"/"===e.Key.substr(0,1)&&(e.Key=e.Key.substr(1)),i+=d,r.options.EnableReporter){var g=r.options.UseAccelerate||"string"===typeof r.options.Domain&&r.options.Domain.includes("accelerate."),m=d>o?"sliceUploadFile":"putObject";e.tracker=new c({Beacon:r.options.BeaconReporter,clsReporter:r.options.ClsReporter,bucket:e.Bucket,region:e.Region,apiName:"uploadFiles",realApi:m,fileKey:e.Key,fileSize:d,accelerate:g,deepTracker:r.options.DeepTracker,customId:r.options.CustomId,delay:r.options.TrackerDelay})}s.each(e,(function(e,t){"object"!==n(e)&&"function"!==typeof e&&(p[t]=e)}));var y=e.onTaskReady,k=function(e){p.TaskId=e,y&&y(e)};e.onTaskReady=k;var v=0,C=e.onProgress,b=function(e){a=a-v+e.loaded,v=e.loaded,C&&C(e),u({loaded:a,total:i})};e.onProgress=b;var x=d>o?"sliceUploadFile":"putObject",S=e.onFileFinish,T=function(t,r){e.tracker&&e.tracker.report(t,r),S&&S(t,r),h&&h(t,r,p)};f.push({api:x,params:e,callback:T})})()})),r._addTasks(f)}function C(e,t){var r=new a,n=this,c=e.Bucket,u=e.Region,l=e.Key,d=e.CopySource,h=s.getSourceParams.call(this,d);if(h){var f=h.Bucket,g=h.Region,m=decodeURIComponent(h.Key),y=void 0===e.CopySliceSize?n.options.CopySliceSize:e.CopySliceSize;y=Math.max(0,y);var k,v,C=e.CopyChunkSize||this.options.CopyChunkSize,x=this.options.CopyChunkParallelLimit,S=this.options.ChunkRetryTimes+1,T=0,R=0,B={},A={},P={};r.on("copy_slice_complete",(function(r){var a={};s.each(e.Headers,(function(e,t){0===t.toLowerCase().indexOf("x-cos-meta-")&&(a[t]=e)}));var d=s.map(r.PartList,(function(e){return{PartNumber:e.PartNumber,ETag:e.ETag}}));i.retry(S,(function(t){n.multipartComplete({Bucket:c,Region:u,Key:l,UploadId:r.UploadId,Parts:d,tracker:e.tracker,calledBySdk:"sliceCopyFile"},t)}),(function(e,n){if(o.removeUsing(r.UploadId),e)return v(null,!0),t(e);o.removeUploadId(r.UploadId),v({loaded:k,total:k},!0),t(null,n)}))})),r.on("get_copy_data_finish",(function(a){var p=o.getCopyFileId(d,B,C,c,l);p&&o.saveUploadId(p,a.UploadId,n.options.UploadIdCacheLimit),o.setUsing(a.UploadId);var h=s.filter(a.PartList,(function(e){return e["Uploaded"]&&(R+=e["PartNumber"]>=T&&k%C||C),!e["Uploaded"]}));i.eachLimit(h,x,(function(t,r){var o=t.PartNumber,s=t.CopySourceRange,p=t.end-t.start;i.retry(S,(function(t){b.call(n,{Bucket:c,Region:u,Key:l,CopySource:d,UploadId:a.UploadId,PartNumber:o,CopySourceRange:s,tracker:e.tracker,calledBySdk:"sliceCopyFile"},t)}),(function(e,n){if(e)return r(e);R+=p,v({loaded:R,total:k}),t.ETag=n.ETag,r(e||null,n)}))}),(function(e){if(e)return o.removeUsing(a.UploadId),v(null,!0),t(e);r.emit("copy_slice_complete",a)}))})),r.on("get_chunk_size_finish",(function(){var i=function(){n.multipartInit({Bucket:c,Region:u,Key:l,Headers:P,tracker:e.tracker,calledBySdk:"sliceCopyFile"},(function(n,o){if(n)return t(n);e.UploadId=o.UploadId,r.emit("get_copy_data_finish",{UploadId:e.UploadId,PartList:e.PartList})}))},a=o.getCopyFileId(d,B,C,c,l),h=o.getUploadIdList(a);if(!a||!h)return i();var f=function t(a){if(a>=h.length)return i();var d=h[a];if(o.using[d])return t(a+1);p.call(n,{Bucket:c,Region:u,Key:l,UploadId:d,tracker:e.tracker,calledBySdk:"sliceCopyFile"},(function(n,i){if(n)o.removeUploadId(d),t(a+1);else{if(o.using[d])return t(a+1);var c={},u=0;s.each(i.PartList,(function(e){var t=parseInt(e.Size),r=u+t-1;c[e.PartNumber+"|"+u+"|"+r]=e.ETag,u+=t})),s.each(e.PartList,(function(e){var t=c[e.PartNumber+"|"+e.start+"|"+e.end];t&&(e.ETag=t,e.Uploaded=!0)})),r.emit("get_copy_data_finish",{UploadId:d,PartList:e.PartList})}}))};f(0)})),r.on("get_file_size_finish",(function(){if(function(){for(var t=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],r=1048576,o=0;o<t.length;o++)if(r=1024*t[o]*1024,k/r<=n.options.MaxPartNumber)break;e.ChunkSize=C=Math.max(C,r),T=Math.ceil(k/C);for(var i=[],a=1;a<=T;a++){var s=(a-1)*C,c=a*C<k?a*C-1:k-1,u={PartNumber:a,start:s,end:c,CopySourceRange:"bytes="+s+"-"+c};i.push(u)}e.PartList=i}(),P="Replaced"===e.Headers["x-cos-metadata-directive"]?e.Headers:A,P["x-cos-storage-class"]=e.Headers["x-cos-storage-class"]||A["x-cos-storage-class"],P=s.clearKey(P),"ARCHIVE"===A["x-cos-storage-class"]||"DEEP_ARCHIVE"===A["x-cos-storage-class"]){var o=A["x-cos-restore"];if(!o||'ongoing-request="true"'===o)return void t(s.error(new Error("Unrestored archive object is not allowed to be copied")))}delete P["x-cos-copy-source"],delete P["x-cos-metadata-directive"],delete P["x-cos-copy-source-If-Modified-Since"],delete P["x-cos-copy-source-If-Unmodified-Since"],delete P["x-cos-copy-source-If-Match"],delete P["x-cos-copy-source-If-None-Match"],r.emit("get_chunk_size_finish")})),n.headObject({Bucket:f,Region:g,Key:m,tracker:e.tracker,calledBySdk:"sliceCopyFile"},(function(o,i){if(o)o.statusCode&&404===o.statusCode?t(s.error(o,{ErrorStatus:m+" Not Exist"})):t(o);else if(k=e.FileSize=i.headers["content-length"],void 0!==k&&k)if(e.tracker&&e.tracker.setParams({httpSize:k}),v=s.throttleOnProgress.call(n,k,e.onProgress),k<=y)e.Headers["x-cos-metadata-directive"]||(e.Headers["x-cos-metadata-directive"]="Copy"),n.putObjectCopy(Object.assign(e,{calledBySdk:"sliceCopyFile"}),(function(e,r){if(e)return v(null,!0),t(e);v({loaded:k,total:k},!0),t(e,r)}));else{var a=i.headers;B=a,A={"Cache-Control":a["cache-control"],"Content-Disposition":a["content-disposition"],"Content-Encoding":a["content-encoding"],"Content-Type":a["content-type"],Expires:a["expires"],"x-cos-storage-class":a["x-cos-storage-class"]},s.each(a,(function(e,t){var r="x-cos-meta-";0===t.indexOf(r)&&t.length>r.length&&(A[t]=e)})),r.emit("get_file_size_finish")}else t(s.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.（ 获取Content-Length失败，请在CORS ExposeHeader设置中添加Content-Length，请参考文档：https://cloud.tencent.com/document/product/436/13318 ）')))}))}else t(s.error(new Error("CopySource format error")))}function b(e,t){var r=e.TaskId,n=e.Bucket,o=e.Region,a=e.Key,s=e.CopySource,c=e.UploadId,u=1*e.PartNumber,l=e.CopySourceRange,d=this.options.ChunkRetryTimes+1,p=this;i.retry(d,(function(t){p.uploadPartCopy({TaskId:r,Bucket:n,Region:o,Key:a,CopySource:s,UploadId:c,PartNumber:u,CopySourceRange:l,tracker:e.tracker,calledBySdk:e.calledBySdk},(function(e,r){t(e||null,r)}))}),(function(e,r){return t(e,r)}))}var x={sliceUploadFile:u,abortUploadTask:m,uploadFile:k,uploadFiles:v,sliceCopyFile:C};e.exports.init=function(e,t){t.transferToTaskMethod(x,"sliceUploadFile"),s.each(x,(function(t,r){e.prototype[r]=s.apiWrapper(r,t)}))}},"./src/async.js":
/*!**********************!*\
  !*** ./src/async.js ***!
  \**********************/
/*! no static exports found */function(e,t){var r=function(e,t,r,n){if(n=n||function(){},!e.length||t<=0)return n();var o=0,i=0,a=0;(function s(){if(o>=e.length)return n();while(a<t&&i<e.length)i+=1,a+=1,r(e[i-1],(function(t){t?(n(t),n=function(){}):(o+=1,a-=1,o>=e.length?n():s())}))})()},n=function(e,t,r){var n=function n(o){t((function(t,i){t&&o<e?n(o+1):r(t,i)}))};e<1?r():n(1)},o={eachLimit:r,retry:n};e.exports=o},"./src/base.js":
/*!*********************!*\
  !*** ./src/base.js ***!
  \*********************/
/*! no static exports found */function(e,t,r){var n=r(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js"),o=r(/*! ../lib/request */"./lib/request.js"),i=r(/*! ./util */"./src/util.js");function a(e,t){var r=this.options.Protocol||(i.isBrowser&&"object"===("undefined"===typeof location?"undefined":n(location))&&"http:"===location.protocol?"http:":"https:"),o=this.options.ServiceDomain,a=e.AppId||this.options.appId,s=e.Region;o?(o=o.replace(/\{\{AppId\}\}/gi,a||"").replace(/\{\{Region\}\}/gi,s||"").replace(/\{\{.*?\}\}/gi,""),/^[a-zA-Z]+:\/\//.test(o)||(o=r+"//"+o),"/"===o.slice(-1)&&(o=o.slice(0,-1))):o=s?r+"//cos."+s+".myqcloud.com":r+"//service.cos.myqcloud.com";var c="",u=s?"cos."+s+".myqcloud.com":"service.cos.myqcloud.com",l=o.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");u===l&&(c=u),_e.call(this,{Action:"name/cos:GetService",url:o,method:"GET",headers:e.Headers,SignHost:c,tracker:e.tracker},(function(e,r){if(e)return t(e);var n=r&&r.ListAllMyBucketsResult&&r.ListAllMyBucketsResult.Buckets&&r.ListAllMyBucketsResult.Buckets.Bucket||[];n=i.isArray(n)?n:[n];var o=r&&r.ListAllMyBucketsResult&&r.ListAllMyBucketsResult.Owner||{};t(null,{Buckets:n,Owner:o,statusCode:r.statusCode,headers:r.headers})}))}function s(e,t){var r=this,n="";if(e["BucketAZConfig"]){var o={BucketAZConfig:e.BucketAZConfig};n=i.json2xml({CreateBucketConfiguration:o})}_e.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,body:n,tracker:e.tracker},(function(n,o){if(n)return t(n);var i=we({protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,isLocation:!0});t(null,{Location:i,statusCode:o.statusCode,headers:o.headers})}))}function c(e,t){_e.call(this,{Action:"name/cos:HeadBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD",tracker:e.tracker},t)}function u(e,t){var r={};r["prefix"]=e["Prefix"]||"",r["delimiter"]=e["Delimiter"],r["marker"]=e["Marker"],r["max-keys"]=e["MaxKeys"],r["encoding-type"]=e["EncodingType"],_e.call(this,{Action:"name/cos:GetBucket",ResourceKey:r["prefix"],method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,tracker:e.tracker},(function(e,r){if(e)return t(e);var n=r.ListBucketResult||{},o=n.Contents||[],a=n.CommonPrefixes||[];o=i.isArray(o)?o:[o],a=i.isArray(a)?a:[a];var s=i.clone(n);i.extend(s,{Contents:o,CommonPrefixes:a,statusCode:r.statusCode,headers:r.headers}),t(null,s)}))}function l(e,t){_e.call(this,{Action:"name/cos:DeleteBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE",tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function d(e,t){var r=e.Headers,n="";if(e["AccessControlPolicy"]){var o=i.clone(e["AccessControlPolicy"]||{}),a=o.Grants||o.Grant;a=i.isArray(a)?a:[a],delete o.Grant,delete o.Grants,o.AccessControlList={Grant:a},n=i.json2xml({AccessControlPolicy:o}),r["Content-Type"]="application/xml",r["Content-MD5"]=i.b64(i.md5(n))}i.each(r,(function(e,t){0===t.indexOf("x-cos-grant-")&&(r[t]=Pe(r[t]))})),_e.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:r,action:"acl",body:n,tracker:e.tracker},(function(e,r){if(e)return t(e);t(null,{statusCode:r.statusCode,headers:r.headers})}))}function p(e,t){_e.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl",tracker:e.tracker},(function(e,r){if(e)return t(e);var n=r.AccessControlPolicy||{},o=n.Owner||{},a=n.AccessControlList.Grant||[];a=i.isArray(a)?a:[a];var s=Ae(n);r.headers&&r.headers["x-cos-acl"]&&(s.ACL=r.headers["x-cos-acl"]),s=i.extend(s,{Owner:o,Grants:a,statusCode:r.statusCode,headers:r.headers}),t(null,s)}))}function h(e,t){var r=e["CORSConfiguration"]||{},n=r["CORSRules"]||e["CORSRules"]||[];n=i.clone(i.isArray(n)?n:[n]),i.each(n,(function(e){i.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],(function(t){var r=t+"s",n=e[r]||e[t]||[];delete e[r],e[t]=i.isArray(n)?n:[n]}))}));var o={CORSRule:n};e.ResponseVary&&(o.ResponseVary=e.ResponseVary);var a=i.json2xml({CORSConfiguration:o}),s=e.Headers;s["Content-Type"]="application/xml",s["Content-MD5"]=i.b64(i.md5(a)),_e.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:a,action:"cors",headers:s,tracker:e.tracker},(function(e,r){if(e)return t(e);t(null,{statusCode:r.statusCode,headers:r.headers})}))}function f(e,t){_e.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors",tracker:e.tracker},(function(e,r){if(e)if(404===e.statusCode&&e.error&&"NoSuchCORSConfiguration"===e.error.Code){var n={CORSRules:[],statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else t(e);else{var o=r.CORSConfiguration||{},a=o.CORSRules||o.CORSRule||[];a=i.clone(i.isArray(a)?a:[a]);var s=o.ResponseVary;i.each(a,(function(e){i.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],(function(t){var r=t+"s",n=e[r]||e[t]||[];delete e[t],e[r]=i.isArray(n)?n:[n]}))})),t(null,{CORSRules:a,ResponseVary:s,statusCode:r.statusCode,headers:r.headers})}}))}function g(e,t){_e.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors",tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode||e.statusCode,headers:r.headers})}))}function m(e,t){_e.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location",tracker:e.tracker},t)}function y(e,t){var r=e["Policy"];try{"string"===typeof r&&(r=JSON.parse(r))}catch(a){}if(!r||"string"===typeof r)return t(i.error(new Error("Policy format error")));var n=JSON.stringify(r);r.version||(r.version="2.0");var o=e.Headers;o["Content-Type"]="application/json",o["Content-MD5"]=i.b64(i.md5(n)),_e.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:n,headers:o,tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function k(e,t){_e.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0,tracker:e.tracker},(function(e,r){if(e)return e.statusCode&&403===e.statusCode?t(i.error(e,{ErrorStatus:"Access Denied"})):e.statusCode&&405===e.statusCode?t(i.error(e,{ErrorStatus:"Method Not Allowed"})):e.statusCode&&404===e.statusCode?t(i.error(e,{ErrorStatus:"Policy Not Found"})):t(e);var n={};try{n=JSON.parse(r.body)}catch(o){}t(null,{Policy:n,statusCode:r.statusCode,headers:r.headers})}))}function v(e,t){_e.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode||e.statusCode,headers:r.headers})}))}function C(e,t){var r=e["Tagging"]||{},n=r.TagSet||r.Tags||e["Tags"]||[];n=i.clone(i.isArray(n)?n:[n]);var o=i.json2xml({Tagging:{TagSet:{Tag:n}}}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.b64(i.md5(o)),_e.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"tagging",headers:a,tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function b(e,t){_e.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",tracker:e.tracker},(function(e,r){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"NoSuchTagSet"!==e.error.Code)t(e);else{var n={Tags:[],statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else{var o=[];try{o=r.Tagging.TagSet.Tag||[]}catch(a){}o=i.clone(i.isArray(o)?o:[o]),t(null,{Tags:o,statusCode:r.statusCode,headers:r.headers})}}))}function x(e,t){_e.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function S(e,t){var r=e["LifecycleConfiguration"]||{},n=r.Rules||e.Rules||[];n=i.clone(n);var o=i.json2xml({LifecycleConfiguration:{Rule:n}}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.b64(i.md5(o)),_e.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"lifecycle",headers:a,tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function T(e,t){_e.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle",tracker:e.tracker},(function(e,r){if(e)if(404===e.statusCode&&e.error&&"NoSuchLifecycleConfiguration"===e.error.Code){var n={Rules:[],statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else t(e);else{var o=[];try{o=r.LifecycleConfiguration.Rule||[]}catch(a){}o=i.clone(i.isArray(o)?o:[o]),t(null,{Rules:o,statusCode:r.statusCode,headers:r.headers})}}))}function R(e,t){_e.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle",tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function B(e,t){if(e["VersioningConfiguration"]){var r=e["VersioningConfiguration"]||{},n=i.json2xml({VersioningConfiguration:r}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=i.b64(i.md5(n)),_e.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:n,action:"versioning",headers:o,tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}else t(i.error(new Error("missing param VersioningConfiguration")))}function A(e,t){_e.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning",tracker:e.tracker},(function(e,r){e||!r.VersioningConfiguration&&(r.VersioningConfiguration={}),t(e,r)}))}function P(e,t){var r=i.clone(e.ReplicationConfiguration),n=i.json2xml({ReplicationConfiguration:r});n=n.replace(/<(\/?)Rules>/gi,"<$1Rule>"),n=n.replace(/<(\/?)Tags>/gi,"<$1Tag>");var o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=i.b64(i.md5(n)),_e.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:n,action:"replication",headers:o,tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function w(e,t){_e.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication",tracker:e.tracker},(function(e,r){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"ReplicationConfigurationnotFoundError"!==e.error.Code)t(e);else{var n={ReplicationConfiguration:{Rules:[]},statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else!r.ReplicationConfiguration&&(r.ReplicationConfiguration={}),r.ReplicationConfiguration.Rule&&(r.ReplicationConfiguration.Rules=i.makeArray(r.ReplicationConfiguration.Rule),delete r.ReplicationConfiguration.Rule),t(e,r)}))}function E(e,t){_e.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication",tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function O(e,t){if(e["WebsiteConfiguration"]){var r=i.clone(e["WebsiteConfiguration"]||{}),n=r["RoutingRules"]||r["RoutingRule"]||[];n=i.isArray(n)?n:[n],delete r.RoutingRule,delete r.RoutingRules,n.length&&(r.RoutingRules={RoutingRule:n});var o=i.json2xml({WebsiteConfiguration:r}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.b64(i.md5(o)),_e.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"website",headers:a,tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}else t(i.error(new Error("missing param WebsiteConfiguration")))}function I(e,t){_e.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"website",tracker:e.tracker},(function(e,r){if(e)if(404===e.statusCode&&"NoSuchWebsiteConfiguration"===e.error.Code){var n={WebsiteConfiguration:{},statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else t(e);else{var o=r.WebsiteConfiguration||{};if(o["RoutingRules"]){var a=i.clone(o["RoutingRules"].RoutingRule||[]);a=i.makeArray(a),o.RoutingRules=a}t(null,{WebsiteConfiguration:o,statusCode:r.statusCode,headers:r.headers})}}))}function j(e,t){_e.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"website",tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function _(e,t){if(e["RefererConfiguration"]){var r=i.clone(e["RefererConfiguration"]||{}),n=r["DomainList"]||{},o=n["Domains"]||n["Domain"]||[];o=i.isArray(o)?o:[o],o.length&&(r.DomainList={Domain:o});var a=i.json2xml({RefererConfiguration:r}),s=e.Headers;s["Content-Type"]="application/xml",s["Content-MD5"]=i.b64(i.md5(a)),_e.call(this,{Action:"name/cos:PutBucketReferer",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:a,action:"referer",headers:s,tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}else t(i.error(new Error("missing param RefererConfiguration")))}function U(e,t){_e.call(this,{Action:"name/cos:GetBucketReferer",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"referer",tracker:e.tracker},(function(e,r){if(e)if(404===e.statusCode&&"NoSuchRefererConfiguration"===e.error.Code){var n={WebsiteConfiguration:{},statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else t(e);else{var o=r.RefererConfiguration||{};if(o["DomainList"]){var a=i.makeArray(o["DomainList"].Domain||[]);o.DomainList={Domains:a}}t(null,{RefererConfiguration:o,statusCode:r.statusCode,headers:r.headers})}}))}function N(e,t){var r=e["DomainConfiguration"]||{},n=r.DomainRule||e.DomainRule||[];n=i.clone(n);var o=i.json2xml({DomainConfiguration:{DomainRule:n}}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.b64(i.md5(o)),_e.call(this,{Action:"name/cos:PutBucketDomain",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"domain",headers:a,tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function D(e,t){_e.call(this,{Action:"name/cos:GetBucketDomain",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain",tracker:e.tracker},(function(e,r){if(e)return t(e);var n=[];try{n=r.DomainConfiguration.DomainRule||[]}catch(o){}n=i.clone(i.isArray(n)?n:[n]),t(null,{DomainRule:n,statusCode:r.statusCode,headers:r.headers})}))}function M(e,t){_e.call(this,{Action:"name/cos:DeleteBucketDomain",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain",tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function L(e,t){var r=e["OriginConfiguration"]||{},n=r.OriginRule||e.OriginRule||[];n=i.clone(n);var o=i.json2xml({OriginConfiguration:{OriginRule:n}}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.b64(i.md5(o)),_e.call(this,{Action:"name/cos:PutBucketOrigin",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"origin",headers:a,tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function F(e,t){_e.call(this,{Action:"name/cos:GetBucketOrigin",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin",tracker:e.tracker},(function(e,r){if(e)return t(e);var n=[];try{n=r.OriginConfiguration.OriginRule||[]}catch(o){}n=i.clone(i.isArray(n)?n:[n]),t(null,{OriginRule:n,statusCode:r.statusCode,headers:r.headers})}))}function K(e,t){_e.call(this,{Action:"name/cos:DeleteBucketOrigin",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin",tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function H(e,t){var r=i.json2xml({BucketLoggingStatus:e["BucketLoggingStatus"]||""}),n=e.Headers;n["Content-Type"]="application/xml",n["Content-MD5"]=i.b64(i.md5(r)),_e.call(this,{Action:"name/cos:PutBucketLogging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"logging",headers:n,tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function z(e,t){_e.call(this,{Action:"name/cos:GetBucketLogging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"logging",tracker:e.tracker},(function(e,r){if(e)return t(e);t(null,{BucketLoggingStatus:r.BucketLoggingStatus,statusCode:r.statusCode,headers:r.headers})}))}function q(e,t,r){var n=i.clone(t["InventoryConfiguration"]);if(n.OptionalFields){var o=n.OptionalFields||[];n.OptionalFields={Field:o}}if(n.Destination&&n.Destination.COSBucketDestination&&n.Destination.COSBucketDestination.Encryption){var a=n.Destination.COSBucketDestination.Encryption;Object.keys(a).indexOf("SSECOS")>-1&&(a["SSE-COS"]=a["SSECOS"],delete a["SSECOS"])}var s=i.json2xml({InventoryConfiguration:n}),c=t.Headers;c["Content-Type"]="application/xml",c["Content-MD5"]=i.b64(i.md5(s));var u="PUT"===e?"name/cos:PutBucketInventory":"name/cos:PostBucketInventory";_e.call(this,{Action:u,method:e,Bucket:t.Bucket,Region:t.Region,body:s,action:"inventory",qs:{id:t["Id"]},headers:c,tracker:t.tracker},(function(e,t){return e&&204===e.statusCode?r(null,{statusCode:e.statusCode}):e?r(e):void r(null,{statusCode:t.statusCode,headers:t.headers})}))}function G(e,t){return q.call(this,"PUT",e,t)}function V(e,t){return q.call(this,"POST",e,t)}function W(e,t){_e.call(this,{Action:"name/cos:GetBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e["Id"]},tracker:e.tracker},(function(e,r){if(e)return t(e);var n=r["InventoryConfiguration"];if(n&&n.OptionalFields&&n.OptionalFields.Field){var o=n.OptionalFields.Field;i.isArray(o)||(o=[o]),n.OptionalFields=o}if(n.Destination&&n.Destination.COSBucketDestination&&n.Destination.COSBucketDestination.Encryption){var a=n.Destination.COSBucketDestination.Encryption;Object.keys(a).indexOf("SSE-COS")>-1&&(a["SSECOS"]=a["SSE-COS"],delete a["SSE-COS"])}t(null,{InventoryConfiguration:n,statusCode:r.statusCode,headers:r.headers})}))}function $(e,t){_e.call(this,{Action:"name/cos:ListBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{"continuation-token":e["ContinuationToken"]},tracker:e.tracker},(function(e,r){if(e)return t(e);var n=r["ListInventoryConfigurationResult"],o=n.InventoryConfiguration||[];o=i.isArray(o)?o:[o],delete n["InventoryConfiguration"],i.each(o,(function(e){if(e&&e.OptionalFields&&e.OptionalFields.Field){var t=e.OptionalFields.Field;i.isArray(t)||(t=[t]),e.OptionalFields=t}if(e.Destination&&e.Destination.COSBucketDestination&&e.Destination.COSBucketDestination.Encryption){var r=e.Destination.COSBucketDestination.Encryption;Object.keys(r).indexOf("SSE-COS")>-1&&(r["SSECOS"]=r["SSE-COS"],delete r["SSE-COS"])}})),n.InventoryConfigurations=o,i.extend(n,{statusCode:r.statusCode,headers:r.headers}),t(null,n)}))}function Q(e,t){_e.call(this,{Action:"name/cos:DeleteBucketInventory",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e["Id"]},tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function J(e,t){if(e["AccelerateConfiguration"]){var r={AccelerateConfiguration:e.AccelerateConfiguration||{}},n=i.json2xml(r),o={"Content-Type":"application/xml"};o["Content-MD5"]=i.b64(i.md5(n)),_e.call(this,{Action:"name/cos:PutBucketAccelerate",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:n,action:"accelerate",headers:o,tracker:e.tracker},(function(e,r){if(e)return t(e);t(null,{statusCode:r.statusCode,headers:r.headers})}))}else t(i.error(new Error("missing param AccelerateConfiguration")))}function X(e,t){_e.call(this,{Action:"name/cos:GetBucketAccelerate",method:"GET",Bucket:e.Bucket,Region:e.Region,action:"accelerate",tracker:e.tracker},(function(e,r){e||!r.AccelerateConfiguration&&(r.AccelerateConfiguration={}),t(e,r)}))}function Z(e,t){var r=e.ServerSideEncryptionConfiguration||{},n=r.Rule||r.Rules||[],o=i.json2xml({ServerSideEncryptionConfiguration:{Rule:n}}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.b64(i.md5(o)),_e.call(this,{Action:"name/cos:PutBucketEncryption",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"encryption",headers:a,tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function Y(e,t){_e.call(this,{Action:"name/cos:GetBucketEncryption",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption",tracker:e.tracker},(function(e,r){if(e)if(404===e.statusCode&&"NoSuchEncryptionConfiguration"===e.code){var n={EncryptionConfiguration:{Rules:[]},statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else t(e);else{var o=i.makeArray(r.EncryptionConfiguration&&r.EncryptionConfiguration.Rule||[]);r.EncryptionConfiguration={Rules:o},t(e,r)}}))}function ee(e,t){_e.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption",tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function te(e,t){_e.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,tracker:e.tracker},(function(r,n){if(r){var o=r.statusCode;return e.Headers["If-Modified-Since"]&&o&&304===o?t(null,{NotModified:!0,statusCode:o}):t(r)}n.ETag=i.attr(n.headers,"etag",""),t(null,n)}))}function re(e,t){var r={};r["prefix"]=e["Prefix"]||"",r["delimiter"]=e["Delimiter"],r["key-marker"]=e["KeyMarker"],r["version-id-marker"]=e["VersionIdMarker"],r["max-keys"]=e["MaxKeys"],r["encoding-type"]=e["EncodingType"],_e.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:r["prefix"],method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,action:"versions",tracker:e.tracker},(function(e,r){if(e)return t(e);var n=r.ListVersionsResult||{},o=n.DeleteMarker||[];o=i.isArray(o)?o:[o];var a=n.Version||[];a=i.isArray(a)?a:[a];var s=i.clone(n);delete s.DeleteMarker,delete s.Version,i.extend(s,{DeleteMarkers:o,Versions:a,statusCode:r.statusCode,headers:r.headers}),t(null,s)}))}function ne(e,t){if(this.options.ObjectKeySimplifyCheck){var r=i.simplifyPath(e.Key);if("/"===r)return void t(i.error(new Error("The Getobject Key is illegal")))}var n=e.Query||{},o=e.QueryString||"",a=i.throttleOnProgress.call(this,0,e.onProgress),s=e.tracker;s&&s.setParams({signStartTime:(new Date).getTime()}),n["response-content-type"]=e["ResponseContentType"],n["response-content-language"]=e["ResponseContentLanguage"],n["response-expires"]=e["ResponseExpires"],n["response-cache-control"]=e["ResponseCacheControl"],n["response-content-disposition"]=e["ResponseContentDisposition"],n["response-content-encoding"]=e["ResponseContentEncoding"],_e.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,DataType:e.DataType,headers:e.Headers,qs:n,qsStr:o,rawBody:!0,onDownloadProgress:a,tracker:s},(function(r,n){if(a(null,!0),r){var o=r.statusCode;return e.Headers["If-Modified-Since"]&&o&&304===o?t(null,{NotModified:!0}):t(r)}t(null,{Body:n.body,ETag:i.attr(n.headers,"etag",""),statusCode:n.statusCode,headers:n.headers})}))}function oe(e,t){var r=this,n=e.ContentLength,o=i.throttleOnProgress.call(r,n,e.onProgress),a=e.Headers;a["Cache-Control"]||a["cache-control"]||(a["Cache-Control"]=""),a["Content-Type"]||a["content-type"]||(a["Content-Type"]=e.Body&&e.Body.type||"");var s=e.UploadAddMetaMd5||r.options.UploadAddMetaMd5||r.options.UploadCheckContentMd5,c=e.tracker;s&&c&&c.setParams({md5StartTime:(new Date).getTime()}),i.getBodyMd5(s,e.Body,(function(s){s&&(c&&c.setParams({md5EndTime:(new Date).getTime()}),r.options.UploadCheckContentMd5&&(a["Content-MD5"]=i.b64(s)),(e.UploadAddMetaMd5||r.options.UploadAddMetaMd5)&&(a["x-cos-meta-md5"]=s)),void 0!==e.ContentLength&&(a["Content-Length"]=e.ContentLength),o(null,!0),_e.call(r,{Action:"name/cos:PutObject",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:e.Query,body:e.Body,onProgress:o,tracker:c},(function(a,s){if(a)return o(null,!0),t(a);o({loaded:n,total:n},!0);var c=we({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:r.options.UseAccelerate?"accelerate":e.Region,object:e.Key});c=c.substr(c.indexOf("://")+3),s.Location=c,s.ETag=i.attr(s.headers,"etag",""),t(null,s)}))}),e.onHashProgress)}function ie(e,t){_e.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId,action:e.Recursive?"recursive":"",tracker:e.tracker},(function(e,r){if(e){var n=e.statusCode;return n&&404===n?t(null,{BucketNotFound:!0,statusCode:n}):t(e)}t(null,{statusCode:r.statusCode,headers:r.headers})}))}function ae(e,t){var r={};e.VersionId&&(r.versionId=e.VersionId),_e.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r,action:"acl",tracker:e.tracker},(function(e,r){if(e)return t(e);var n=r.AccessControlPolicy||{},o=n.Owner||{},a=n.AccessControlList&&n.AccessControlList.Grant||[];a=i.isArray(a)?a:[a];var s=Ae(n);delete s.GrantWrite,r.headers&&r.headers["x-cos-acl"]&&(s.ACL=r.headers["x-cos-acl"]),s=i.extend(s,{Owner:o,Grants:a,statusCode:r.statusCode,headers:r.headers}),t(null,s)}))}function se(e,t){var r=e.Headers,n="";if(e["AccessControlPolicy"]){var o=i.clone(e["AccessControlPolicy"]||{}),a=o.Grants||o.Grant;a=i.isArray(a)?a:[a],delete o.Grant,delete o.Grants,o.AccessControlList={Grant:a},n=i.json2xml({AccessControlPolicy:o}),r["Content-Type"]="application/xml",r["Content-MD5"]=i.b64(i.md5(n))}i.each(r,(function(e,t){0===t.indexOf("x-cos-grant-")&&(r[t]=Pe(r[t]))})),_e.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:r,body:n,tracker:e.tracker},(function(e,r){if(e)return t(e);t(null,{statusCode:r.statusCode,headers:r.headers})}))}function ce(e,t){var r=e.Headers;r["Origin"]=e["Origin"],r["Access-Control-Request-Method"]=e["AccessControlRequestMethod"],r["Access-Control-Request-Headers"]=e["AccessControlRequestHeaders"],_e.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:r,tracker:e.tracker},(function(e,r){if(e)return e.statusCode&&403===e.statusCode?t(null,{OptionsForbidden:!0,statusCode:e.statusCode}):t(e);var n=r.headers||{};t(null,{AccessControlAllowOrigin:n["access-control-allow-origin"],AccessControlAllowMethods:n["access-control-allow-methods"],AccessControlAllowHeaders:n["access-control-allow-headers"],AccessControlExposeHeaders:n["access-control-expose-headers"],AccessControlMaxAge:n["access-control-max-age"],statusCode:r.statusCode,headers:r.headers})}))}function ue(e,t){var r=this,n=e.Headers;n["Cache-Control"]||n["cache-control"]||(n["Cache-Control"]="");var o=e.CopySource||"",a=i.getSourceParams.call(this,o);if(a){var s=a.Bucket,c=a.Region,u=decodeURIComponent(a.Key);_e.call(this,{Scope:[{action:"name/cos:GetObject",bucket:s,region:c,prefix:u},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,tracker:e.tracker},(function(n,o){if(n)return t(n);var a=i.clone(o.CopyObjectResult||{}),s=we({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0});i.extend(a,{Location:s,statusCode:o.statusCode,headers:o.headers}),t(null,a)}))}else t(i.error(new Error("CopySource format error")))}function le(e,t){var r=e.CopySource||"",n=i.getSourceParams.call(this,r);if(n){var o=n.Bucket,a=n.Region,s=decodeURIComponent(n.Key);_e.call(this,{Scope:[{action:"name/cos:GetObject",bucket:o,region:a,prefix:s},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e["PartNumber"],uploadId:e["UploadId"]},headers:e.Headers,tracker:e.tracker},(function(e,r){if(e)return t(e);var n=i.clone(r.CopyPartResult||{});i.extend(n,{statusCode:r.statusCode,headers:r.headers}),t(null,n)}))}else t(i.error(new Error("CopySource format error")))}function de(e,t){var r=e.Objects||[],n=e.Quiet;r=i.isArray(r)?r:[r];var o=i.json2xml({Delete:{Object:r,Quiet:n||!1}}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.b64(i.md5(o));var s=i.map(r,(function(t){return{action:"name/cos:DeleteObject",bucket:e.Bucket,region:e.Region,prefix:t.Key}}));_e.call(this,{Scope:s,method:"POST",Bucket:e.Bucket,Region:e.Region,body:o,action:"delete",headers:a,tracker:e.tracker},(function(e,r){if(e)return t(e);var n=r.DeleteResult||{},o=n.Deleted||[],a=n.Error||[];o=i.isArray(o)?o:[o],a=i.isArray(a)?a:[a];var s=i.clone(n);i.extend(s,{Error:a,Deleted:o,statusCode:r.statusCode,headers:r.headers}),t(null,s)}))}function pe(e,t){var r=e.Headers;if(e["RestoreRequest"]){var n=e.RestoreRequest||{},o=i.json2xml({RestoreRequest:n});r["Content-Type"]="application/xml",r["Content-MD5"]=i.b64(i.md5(o)),_e.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:o,action:"restore",headers:r,tracker:e.tracker},t)}else t(i.error(new Error("missing param RestoreRequest")))}function he(e,t){var r=e["Tagging"]||{},n=r.TagSet||r.Tags||e["Tags"]||[];n=i.clone(i.isArray(n)?n:[n]);var o=i.json2xml({Tagging:{TagSet:{Tag:n}}}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.b64(i.md5(o)),_e.call(this,{Action:"name/cos:PutObjectTagging",method:"PUT",Bucket:e.Bucket,Key:e.Key,Region:e.Region,body:o,action:"tagging",headers:a,VersionId:e.VersionId,tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function fe(e,t){_e.call(this,{Action:"name/cos:GetObjectTagging",method:"GET",Key:e.Key,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",VersionId:e.VersionId,tracker:e.tracker},(function(e,r){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"NoSuchTagSet"!==e.error.Code)t(e);else{var n={Tags:[],statusCode:e.statusCode};e.headers&&(n.headers=e.headers),t(null,n)}else{var o=[];try{o=r.Tagging.TagSet.Tag||[]}catch(a){}o=i.clone(i.isArray(o)?o:[o]),t(null,{Tags:o,statusCode:r.statusCode,headers:r.headers})}}))}function ge(e,t){_e.call(this,{Action:"name/cos:DeleteObjectTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"tagging",VersionId:e.VersionId,tracker:e.tracker},(function(e,r){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:r.statusCode,headers:r.headers})}))}function me(e,t){var r=e["SelectType"];if(!r)return t(i.error(new Error("missing param SelectType")));var n=e["SelectRequest"]||{},o=i.json2xml({SelectRequest:n}),a=e.Headers;a["Content-Type"]="application/xml",a["Content-MD5"]=i.b64(i.md5(o)),_e.call(this,{Action:"name/cos:GetObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"select",qs:{"select-type":e["SelectType"]},VersionId:e.VersionId,body:o,DataType:"arraybuffer",rawBody:!0,tracker:e.tracker},(function(e,r){if(e&&204===e.statusCode)return t(null,{statusCode:e.statusCode});if(e)return t(e);var n=i.parseSelectPayload(r.body);t(null,{statusCode:r.statusCode,headers:r.headers,Body:n.body,Payload:n.payload})}))}function ye(e,t){var r=this,n=e.Headers,o=e.tracker;n["Cache-Control"]||n["cache-control"]||(n["Cache-Control"]=""),n["Content-Type"]||n["content-type"]||(n["Content-Type"]=e.Body&&e.Body.type||"");var a=e.Body&&(e.UploadAddMetaMd5||r.options.UploadAddMetaMd5);a&&o&&o.setParams({md5StartTime:(new Date).getTime()}),i.getBodyMd5(a,e.Body,(function(n){n&&(e.Headers["x-cos-meta-md5"]=n),a&&o&&o.setParams({md5EndTime:(new Date).getTime()}),_e.call(r,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"uploads",headers:e.Headers,qs:e.Query,tracker:o},(function(e,r){return e?(o&&o.parent&&o.parent.setParams({errorNode:"multipartInit"}),t(e)):(r=i.clone(r||{}),r&&r.InitiateMultipartUploadResult?t(null,i.extend(r.InitiateMultipartUploadResult,{statusCode:r.statusCode,headers:r.headers})):void t(null,r))}))}),e.onHashProgress)}function ke(e,t){var r=this;i.getFileSize("multipartUpload",e,(function(){var n=e.tracker,o=r.options.UploadCheckContentMd5;o&&n&&n.setParams({md5StartTime:(new Date).getTime()}),i.getBodyMd5(o,e.Body,(function(a){a&&(e.Headers["Content-MD5"]=i.b64(a)),o&&n&&n.setParams({md5EndTime:(new Date).getTime()}),n&&n.setParams({partNumber:e.PartNumber}),_e.call(r,{Action:"name/cos:UploadPart",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{partNumber:e["PartNumber"],uploadId:e["UploadId"]},headers:e.Headers,onProgress:e.onProgress,body:e.Body||null,tracker:n},(function(e,r){if(e)return n&&n.parent&&n.parent.setParams({errorNode:"multipartUpload"}),t(e);t(null,{ETag:i.attr(r.headers,"etag",""),statusCode:r.statusCode,headers:r.headers})}))}))}))}function ve(e,t){for(var r=this,n=e.UploadId,o=e["Parts"],a=e.tracker,s=0,c=o.length;s<c;s++)o[s]["ETag"]&&0===o[s]["ETag"].indexOf('"')||(o[s]["ETag"]='"'+o[s]["ETag"]+'"');var u=i.json2xml({CompleteMultipartUpload:{Part:o}});u=u.replace(/\n\s*/g,"");var l=e.Headers;l["Content-Type"]="application/xml",l["Content-MD5"]=i.b64(i.md5(u)),_e.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{uploadId:n},body:u,headers:l,tracker:a},(function(n,o){if(n)return a&&a.parent&&a.parent.setParams({errorNode:"multipartComplete"}),t(n);var s=we({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0}),c=o.CompleteMultipartUploadResult||{};if(c.ProcessResults&&(c.UploadResult={OriginalInfo:{Key:c.Key,Location:s,ETag:c.ETag,ImageInfo:c.ImageInfo},ProcessResults:c.ProcessResults},delete c.ImageInfo,delete c.ProcessResults),c.CallbackResult){var u=c.CallbackResult;if("200"===u.Status&&u.CallbackBody)try{c.CallbackBody=JSON.parse(i.decodeBase64(u.CallbackBody))}catch(p){c.CallbackBody={}}else c.CallbackError=u.Error||{};delete c.CallbackResult}if(c.ReturnBodyResult){var l=c.ReturnBodyResult;if("200"===l.Status&&l.ReturnBody)try{c.ReturnBody=JSON.parse(i.decodeBase64(l.ReturnBody))}catch(p){c.ReturnBody={}}else c.ReturnError={Code:l.Code,Message:l.Message,Status:l.Status};delete c.ReturnBodyResult}var d=i.extend(c,{Location:s,statusCode:o.statusCode,headers:o.headers});t(null,d)}))}function Ce(e,t){var r={};r["delimiter"]=e["Delimiter"],r["encoding-type"]=e["EncodingType"],r["prefix"]=e["Prefix"]||"",r["max-uploads"]=e["MaxUploads"],r["key-marker"]=e["KeyMarker"],r["upload-id-marker"]=e["UploadIdMarker"],r=i.clearKey(r);var n=e.tracker;n&&n.setParams({signStartTime:(new Date).getTime()}),_e.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:r["prefix"],method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:r,action:"uploads",tracker:n},(function(e,r){if(e)return n&&n.parent&&n.parent.setParams({errorNode:"multipartList"}),t(e);if(r&&r.ListMultipartUploadsResult){var o=r.ListMultipartUploadsResult.Upload||[];o=i.isArray(o)?o:[o],r.ListMultipartUploadsResult.Upload=o}var a=i.clone(r.ListMultipartUploadsResult||{});i.extend(a,{statusCode:r.statusCode,headers:r.headers}),t(null,a)}))}function be(e,t){var r={},n=e.tracker;r["uploadId"]=e["UploadId"],r["encoding-type"]=e["EncodingType"],r["max-parts"]=e["MaxParts"],r["part-number-marker"]=e["PartNumberMarker"],_e.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r,tracker:n},(function(e,r){if(e)return n&&n.parent&&n.parent.setParams({errorNode:"multipartListPart"}),t(e);var o=r.ListPartsResult||{},a=o.Part||[];a=i.isArray(a)?a:[a],o.Part=a;var s=i.clone(o);i.extend(s,{statusCode:r.statusCode,headers:r.headers}),t(null,s)}))}function xe(e,t){var r={};r["uploadId"]=e["UploadId"],_e.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:r,tracker:e.tracker},(function(e,r){if(e)return t(e);t(null,{statusCode:r.statusCode,headers:r.headers})}))}function Se(e,t){_e.call(this,{method:e.Method,Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:e.Action,headers:e.Headers,qs:e.Query,body:e.Body,Url:e.Url,rawBody:e.RawBody,DataType:e.DataType,tracker:e.tracker},(function(e,r){if(e)return t(e);r&&r.body&&(r.Body=r.body,delete r.body),t(e,r)}))}function Te(e,t){var r=e.Headers;r["Cache-Control"]||r["cache-control"]||(r["Cache-Control"]=""),r["Content-Type"]||r["content-type"]||(r["Content-Type"]=e.Body&&e.Body.type||""),_e.call(this,{Action:"name/cos:AppendObject",method:"POST",Bucket:e.Bucket,Region:e.Region,action:"append",Key:e.Key,body:e.Body,qs:{position:e.Position},headers:e.Headers,tracker:e.tracker},(function(e,r){if(e)return t(e);t(null,r)}))}function Re(e){var t=this;return i.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Bucket:e.Bucket,Region:e.Region,Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,UseRawKey:t.options.UseRawKey,SystemClockOffset:t.options.SystemClockOffset})}function Be(e,t){var r=this,n=void 0===e.UseAccelerate?r.options.UseAccelerate:e.UseAccelerate,o=we({ForcePathStyle:r.options.ForcePathStyle,protocol:e.Protocol||r.options.Protocol,domain:e.Domain||r.options.Domain,bucket:e.Bucket,region:n?"accelerate":e.Region,object:e.Key}),a="";e.Query&&(a+=i.obj2str(e.Query)),e.QueryString&&(a+=(a?"&":"")+e.QueryString);var s=o;if(void 0!==e.Sign&&!e.Sign)return a&&(s+="?"+a),t(null,{Url:s}),s;var c=Ee.call(this,{Bucket:e.Bucket,Region:e.Region,UseAccelerate:e.UseAccelerate,Url:o}),u=Oe.call(this,{Action:"PUT"===(e.Method||"").toUpperCase()?"name/cos:PutObject":"name/cos:GetObject",Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key,Expires:e.Expires,Headers:e.Headers,Query:e.Query,SignHost:c,ForceSignHost:!1!==e.ForceSignHost&&r.options.ForceSignHost},(function(e,r){if(t)if(e)t(e);else{var n=function(e){var t=e.match(/q-url-param-list.*?(?=&)/g)[0],r="q-url-param-list="+encodeURIComponent(t.replace(/q-url-param-list=/,"")).toLowerCase(),n=new RegExp(t,"g"),o=e.replace(n,r);return o},i=o;i+="?"+(r.Authorization.indexOf("q-signature")>-1?n(r.Authorization):"sign="+encodeURIComponent(r.Authorization)),r.SecurityToken&&(i+="&x-cos-security-token="+r.SecurityToken),r.ClientIP&&(i+="&clientIP="+r.ClientIP),r.ClientUA&&(i+="&clientUA="+r.ClientUA),r.Token&&(i+="&token="+r.Token),a&&(i+="&"+a),setTimeout((function(){t(null,{Url:i})}))}}));return u?(s+="?"+u.Authorization+(u.SecurityToken?"&x-cos-security-token="+u.SecurityToken:""),a&&(s+="&"+a)):a&&(s+="?"+a),s}function Ae(e){var t={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},r={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},n=e&&e.AccessControlList||{},o=n.Grant;o&&(o=i.isArray(o)?o:[o]);var a={READ:0,WRITE:0,FULL_CONTROL:0};return o&&o.length&&i.each(o,(function(n){var o=n.Grantee.URI&&n.Grantee.URI.endsWith("/groups/global/AllUsers");"qcs::cam::anyone:anyone"===n.Grantee.ID||o?a[n.Permission]=1:n.Grantee.ID!==e.Owner.ID&&t[r[n.Permission]].push('id="'+n.Grantee.ID+'"')})),a.FULL_CONTROL||a.WRITE&&a.READ?t.ACL="public-read-write":a.READ?t.ACL="public-read":t.ACL="private",i.each(r,(function(e){t[e]=Pe(t[e].join(","))})),t}function Pe(e){var t,r,n=e.split(","),o={};for(t=0;t<n.length;)r=n[t].trim(),o[r]?n.splice(t,1):(o[r]=!0,n[t]=r,t++);return n.join(",")}function we(e){var t=e.region||"",r=e.bucket||"",o=r.substr(0,r.lastIndexOf("-")),a=r.substr(r.lastIndexOf("-")+1),s=e.domain,c=e.object;"function"===typeof s&&(s=s({Bucket:r,Region:t})),["http","https"].includes(e.protocol)&&(e.protocol=e.protocol+":");var u=e.protocol||(i.isBrowser&&"object"===("undefined"===typeof location?"undefined":n(location))&&"http:"===location.protocol?"http:":"https:");s||(s=["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(t)>-1?"{Region}.myqcloud.com":"cos.{Region}.myqcloud.com",e.ForcePathStyle||(s="{Bucket}."+s)),s=s.replace(/\{\{AppId\}\}/gi,a).replace(/\{\{Bucket\}\}/gi,o).replace(/\{\{Region\}\}/gi,t).replace(/\{\{.*?\}\}/gi,""),s=s.replace(/\{AppId\}/gi,a).replace(/\{BucketName\}/gi,o).replace(/\{Bucket\}/gi,r).replace(/\{Region\}/gi,t).replace(/\{.*?\}/gi,""),/^[a-zA-Z]+:\/\//.test(s)||(s=u+"//"+s),"/"===s.slice(-1)&&(s=s.slice(0,-1));var l=s;return e.ForcePathStyle&&(l+="/"+r),l+="/",c&&(l+=i.camSafeUrlEncode(c).replace(/%2F/g,"/")),e.isLocation&&(l=l.replace(/^https?:\/\//,"")),l}var Ee=function(e){if(!e.Bucket||!e.Region)return"";var t=void 0===e.UseAccelerate?this.options.UseAccelerate:e.UseAccelerate,r=e.Url||we({ForcePathStyle:this.options.ForcePathStyle,protocol:this.options.Protocol,domain:this.options.Domain,bucket:e.Bucket,region:t?"accelerate":e.Region}),n=r.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");return n};function Oe(e,t){var r=i.clone(e.Headers),n="";i.each(r,(function(e,t){(""===e||["content-type","cache-control","expires"].indexOf(t.toLowerCase())>-1)&&delete r[t],"host"===t.toLowerCase()&&(n=e)}));var o=!1!==e.ForceSignHost;!n&&e.SignHost&&o&&(r.Host=e.SignHost);var a=!1,s=function(e,r){a||(a=!0,r&&r.XCosSecurityToken&&!r.SecurityToken&&(r=i.clone(r),r.SecurityToken=r.XCosSecurityToken,delete r.XCosSecurityToken),t&&t(e,r))},c=this,u=e.Bucket||"",l=e.Region||"",d=e.Key||"";c.options.ForcePathStyle&&u&&(d=u+"/"+d);var p="/"+d,h={},f=e.Scope;if(!f){var g=e.Action||"",m=e.ResourceKey||e.Key||"";f=e.Scope||[{action:g,bucket:u,region:l,prefix:m}]}var y=i.md5(JSON.stringify(f));c._StsCache=c._StsCache||[],function(){var e,t;for(e=c._StsCache.length-1;e>=0;e--){t=c._StsCache[e];var r=Math.round(i.getSkewTime(c.options.SystemClockOffset)/1e3)+30;if(t.StartTime&&r<t.StartTime||r>=t.ExpiredTime)c._StsCache.splice(e,1);else if(!t.ScopeLimit||t.ScopeLimit&&t.ScopeKey===y){h=t;break}}}();var k=function(){var t="";h.StartTime&&e.Expires?t=h.StartTime+";"+(h.StartTime+1*e.Expires):h.StartTime&&h.ExpiredTime&&(t=h.StartTime+";"+h.ExpiredTime);var n=i.getAuth({SecretId:h.TmpSecretId,SecretKey:h.TmpSecretKey,Method:e.Method,Pathname:p,Query:e.Query,Headers:r,Expires:e.Expires,UseRawKey:c.options.UseRawKey,SystemClockOffset:c.options.SystemClockOffset,KeyTime:t,ForceSignHost:o}),a={Authorization:n,SecurityToken:h.SecurityToken||h.XCosSecurityToken||"",Token:h.Token||"",ClientIP:h.ClientIP||"",ClientUA:h.ClientUA||"",SignFrom:"client"};s(null,a)},v=function(e){if(e.Authorization){var t=!1,r=e.Authorization;if(r)if(r.indexOf(" ")>-1)t=!1;else if(r.indexOf("q-sign-algorithm=")>-1&&r.indexOf("q-ak=")>-1&&r.indexOf("q-sign-time=")>-1&&r.indexOf("q-key-time=")>-1&&r.indexOf("q-url-param-list=")>-1)t=!0;else try{r=atob(r),r.indexOf("a=")>-1&&r.indexOf("k=")>-1&&r.indexOf("t=")>-1&&r.indexOf("r=")>-1&&r.indexOf("b=")>-1&&(t=!0)}catch(n){}if(!t)return i.error(new Error("getAuthorization callback params format error"))}else{if(!e.TmpSecretId)return i.error(new Error('getAuthorization callback params missing "TmpSecretId"'));if(!e.TmpSecretKey)return i.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));if(!e.SecurityToken&&!e.XCosSecurityToken)return i.error(new Error('getAuthorization callback params missing "SecurityToken"'));if(!e.ExpiredTime)return i.error(new Error('getAuthorization callback params missing "ExpiredTime"'));if(e.ExpiredTime&&10!==e.ExpiredTime.toString().length)return i.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(e.StartTime&&10!==e.StartTime.toString().length)return i.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1};if(h.ExpiredTime&&h.ExpiredTime-i.getSkewTime(c.options.SystemClockOffset)/1e3>60)k();else if(c.options.getAuthorization)c.options.getAuthorization.call(c,{Bucket:u,Region:l,Method:e.Method,Key:d,Pathname:p,Query:e.Query,Headers:r,Scope:f,SystemClockOffset:c.options.SystemClockOffset,ForceSignHost:o},(function(e){"string"===typeof e&&(e={Authorization:e});var t=v(e);if(t)return s(t);e.Authorization?s(null,e):(h=e||{},h.Scope=f,h.ScopeKey=y,c._StsCache.push(h),k())}));else{if(!c.options.getSTS)return function(){var t="";if(c.options.StartTime&&e.Expires){if(10!==c.options.StartTime.toString().length)return s(i.error(new Error('params "StartTime" should be 10 digits')));t=c.options.StartTime+";"+(c.options.StartTime+1*e.Expires)}else if(c.options.StartTime&&c.options.ExpiredTime){if(10!==c.options.StartTime.toString().length)return s(i.error(new Error('params "StartTime" should be 10 digits')));if(10!==c.options.ExpiredTime.toString().length)return s(i.error(new Error('params "ExpiredTime" should be 10 digits')));t=c.options.StartTime+";"+1*c.options.ExpiredTime}var n=i.getAuth({SecretId:e.SecretId||c.options.SecretId,SecretKey:e.SecretKey||c.options.SecretKey,Method:e.Method,Pathname:p,Query:e.Query,Headers:r,Expires:e.Expires,KeyTime:t,UseRawKey:c.options.UseRawKey,SystemClockOffset:c.options.SystemClockOffset,ForceSignHost:o}),a={Authorization:n,SecurityToken:c.options.SecurityToken||c.options.XCosSecurityToken,SignFrom:"client"};return s(null,a),a}();c.options.getSTS.call(c,{Bucket:u,Region:l},(function(e){h=e||{},h.Scope=f,h.ScopeKey=y,h.TmpSecretId||(h.TmpSecretId=h.SecretId),h.TmpSecretKey||(h.TmpSecretKey=h.SecretKey);var t=v(h);if(t)return s(t);c._StsCache.push(h),k()}))}return""}function Ie(e){var t=this,r=!1,n=!1,o=!1,a=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var s=e.error.Code,c=e.error.Message;("RequestTimeTooSkewed"===s||"AccessDenied"===s&&"Request has expired"===c)&&(n=!0)}catch(l){}if(e)if(n&&a){var u=Date.parse(a);this.options.CorrectClockSkew&&Math.abs(i.getSkewTime(this.options.SystemClockOffset)-u)>=3e4&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=u-Date.now(),r=!0)}else 5===Math.floor(e.statusCode/100)?r=!0:"CORS blocked or network error"===e.message&&(o=!0,r=t.options.AutoSwitchHost);return{canRetry:r,networkError:o}}function je(e){var t=e.requestUrl,r=e.clientCalcSign,n=e.networkError;if(!this.options.AutoSwitchHost)return!1;if(!t)return!1;if(!r)return!1;if(!n)return!1;var o=/^https?:\/\/[^\/]*\.cos\.[^\/]*\.myqcloud\.com(\/.*)?$/,i=/^https?:\/\/[^\/]*\.cos\.accelerate\.myqcloud\.com(\/.*)?$/,a=o.test(t)&&!i.test(t);return a}function _e(e,t){var r=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=i.clearKey(e.qs),e.headers&&(e.headers=i.clearKey(e.headers)),e.qs&&(e.qs=i.clearKey(e.qs));var n=i.clone(e.qs);e.action&&(n[e.action]="");var o=e.url||e.Url,a=e.SignHost||Ee.call(this,{Bucket:e.Bucket,Region:e.Region,Url:o}),s=e.tracker,c=function o(i){var c=r.options.SystemClockOffset;s&&s.setParams({signStartTime:(new Date).getTime(),httpRetryTimes:i-1}),e.SwitchHost&&(a=a.replace(/myqcloud.com/,"tencentcos.cn")),Oe.call(r,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.method,Key:e.Key,Query:n,Headers:e.headers,SignHost:a,Action:e.Action,ResourceKey:e.ResourceKey,Scope:e.Scope,ForceSignHost:r.options.ForceSignHost,SwitchHost:e.SwitchHost},(function(n,a){n?t(n):(s&&s.setParams({signEndTime:(new Date).getTime(),httpStartTime:(new Date).getTime()}),e.AuthData=a,Ue.call(r,e,(function(n,u){s&&s.setParams({httpEndTime:(new Date).getTime()});var l=!1,d=!1;if(n){var p=Ie.call(r,n);l=p.canRetry||c!==r.options.SystemClockOffset,d=p.networkError}if(n&&i<2&&l){e.headers&&(delete e.headers.Authorization,delete e.headers["token"],delete e.headers["clientIP"],delete e.headers["clientUA"],e.headers["x-cos-security-token"]&&delete e.headers["x-cos-security-token"],e.headers["x-ci-security-token"]&&delete e.headers["x-ci-security-token"]);var h=je.call(r,{requestUrl:(null===n||void 0===n?void 0:n.url)||"",clientCalcSign:"client"===a.SignFrom,networkError:d});e.SwitchHost=h,e.retry=!0,o(i+1)}else t(n,u)})))}))};c(1)}function Ue(e,t){var r=this,n=e.TaskId;if(!n||r._isRunningTask(n)){var a=e.Bucket,s=e.Region,c=e.Key,u=e.method||"GET",l=e.Url||e.url,d=e.body,p=e.rawBody;r.options.UseAccelerate&&(s="accelerate"),l=l||we({ForcePathStyle:r.options.ForcePathStyle,protocol:r.options.Protocol,domain:r.options.Domain,bucket:a,region:s,object:c}),e.SwitchHost&&(l=l.replace(/myqcloud.com/,"tencentcos.cn"));var h=c?l:"";e.action&&(l=l+"?"+(i.isIOS_QQ?"".concat(e.action,"="):e.action)),e.qsStr&&(l=l.indexOf("?")>-1?l+"&"+e.qsStr:l+"?"+e.qsStr);var f={method:u,url:l,headers:e.headers,qs:e.qs,body:d},g="x-cos-security-token";if(i.isCIHost(l)&&(g="x-ci-security-token"),f.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(f.headers["token"]=e.AuthData.Token),e.AuthData.ClientIP&&(f.headers["clientIP"]=e.AuthData.ClientIP),e.AuthData.ClientUA&&(f.headers["clientUA"]=e.AuthData.ClientUA),e.AuthData.SecurityToken&&(f.headers[g]=e.AuthData.SecurityToken),f.headers&&(f.headers=i.clearKey(f.headers)),e.retry&&(f.headers["x-cos-sdk-retry"]=!0),f=i.clearKey(f),e.onProgress&&"function"===typeof e.onProgress){var m=d&&(d.size||d.length)||0;f.onProgress=function(t){if(!n||r._isRunningTask(n)){var o=t?t.loaded:0;e.onProgress({loaded:o,total:m})}}}e.onDownloadProgress&&(f.onDownloadProgress=e.onDownloadProgress),e.DataType&&(f.dataType=e.DataType),this.options.Timeout&&(f.timeout=this.options.Timeout),r.options.ForcePathStyle&&(f.pathStyle=r.options.ForcePathStyle),r.emit("before-send",f);var y,k=f.url.includes("accelerate."),v=f.qs?Object.keys(f.qs).map((function(e){return"".concat(e,"=").concat(f.qs[e])})).join("&"):"",C=v?f.url+"?"+v:f.url;if(e.tracker)e.tracker.setParams({url:C,httpMethod:f.method,accelerate:k,httpSize:(null===(y=f.body)||void 0===y?void 0:y.size)||0}),e.tracker.parent&&!e.tracker.parent.params.url&&e.tracker.parent.setParams({url:h,accelerate:k});var b=(r.options.Request||o)(f,(function(o){if(!o||"abort"!==o.error){var a={options:f,error:o&&o.error,statusCode:o&&o.statusCode||0,statusMessage:o&&o.statusMessage||"",headers:o&&o.headers||{},body:o&&o.body};r.emit("after-receive",a);var s,c=a.error,u=a.body,l={statusCode:a.statusCode,statusMessage:a.statusMessage,headers:a.headers},d=function(o,a){if(n&&r.off("inner-kill-task",x),!s){s=!0;var c={};if(l&&l.statusCode&&(c.statusCode=l.statusCode),l&&l.headers&&(c.headers=l.headers),o)f.url&&(c.url=f.url),f.method&&(c.method=f.method),o=i.extend(o||{},c),t(o,null);else{if("name/cos:PutObject"===e.Action){var u={};for(var d in e.headers){var p=d.toLowerCase();u[p]=e.headers[d]}u["x-cos-callback"]?a.Error?(a.CallbackError=i.clone(a.Error),delete a.Error):a.CallbackBody=i.clone(a):u["x-cos-return-body"]&&(a.Error?(a.ReturnError=i.clone(a.Error),delete a.Error):a.ReturnBody=i.clone(a))}a=i.extend(a||{},c),t(null,a)}b=null}};if(c)return d(i.error(c));var h=l.statusCode,g=2===Math.floor(h/100);if(p){if(g)return d(null,{body:u});if(u instanceof Blob)return void i.readAsBinaryString(u,(function(e){var t=i.parseResBody(e),r=t.Error||t;return d(i.error(new Error(r.Message||"response body error"),{code:r.Code,error:r}))}))}var m=i.parseResBody(u),y=m.Error||m;g?d(null,m):y?d(i.error(new Error(y.Message),{code:y.Code,error:y})):h?d(i.error(new Error(l.statusMessage),{code:""+h})):h&&d(i.error(new Error("statusCode error")))}})),x=function e(t){t.TaskId===n&&(b&&b.abort&&b.abort(),r.off("inner-kill-task",e))};n&&r.on("inner-kill-task",x)}}var Ne={getService:a,putBucket:s,headBucket:c,getBucket:u,deleteBucket:l,putBucketAcl:d,getBucketAcl:p,putBucketCors:h,getBucketCors:f,deleteBucketCors:g,getBucketLocation:m,getBucketPolicy:k,putBucketPolicy:y,deleteBucketPolicy:v,putBucketTagging:C,getBucketTagging:b,deleteBucketTagging:x,putBucketLifecycle:S,getBucketLifecycle:T,deleteBucketLifecycle:R,putBucketVersioning:B,getBucketVersioning:A,putBucketReplication:P,getBucketReplication:w,deleteBucketReplication:E,putBucketWebsite:O,getBucketWebsite:I,deleteBucketWebsite:j,putBucketReferer:_,getBucketReferer:U,putBucketDomain:N,getBucketDomain:D,deleteBucketDomain:M,putBucketOrigin:L,getBucketOrigin:F,deleteBucketOrigin:K,putBucketLogging:H,getBucketLogging:z,putBucketInventory:G,postBucketInventory:V,getBucketInventory:W,listBucketInventory:$,deleteBucketInventory:Q,putBucketAccelerate:J,getBucketAccelerate:X,putBucketEncryption:Z,getBucketEncryption:Y,deleteBucketEncryption:ee,getObject:ne,headObject:te,listObjectVersions:re,putObject:oe,deleteObject:ie,getObjectAcl:ae,putObjectAcl:se,optionsObject:ce,putObjectCopy:ue,deleteMultipleObject:de,restoreObject:pe,putObjectTagging:he,getObjectTagging:fe,deleteObjectTagging:ge,selectObjectContent:me,appendObject:Te,uploadPartCopy:le,multipartInit:ye,multipartUpload:ke,multipartComplete:ve,multipartList:Ce,multipartListPart:be,multipartAbort:xe,request:Se,getObjectUrl:Be,getAuth:Re};function De(e,t,r){i.each(["Cors","Acl"],(function(n){if(e.slice(-n.length)===n){var o=e.slice(0,-n.length)+n.toUpperCase(),a=i.apiWrapper(e,t),s=!1;r[o]=function(){!s&&console.warn("warning: cos."+o+" has been deprecated. Please Use cos."+e+" instead."),s=!0,a.apply(this,arguments)}}}))}e.exports.init=function(e,t){t.transferToTaskMethod(Ne,"putObject"),i.each(Ne,(function(t,r){e.prototype[r]=i.apiWrapper(r,t),De(r,t,e.prototype)}))}},"./src/cos.js":
/*!********************!*\
  !*** ./src/cos.js ***!
  \********************/
/*! no static exports found */function(e,t,r){"use strict";var n=r(/*! ./util */"./src/util.js"),o=r(/*! ./event */"./src/event.js"),i=r(/*! ./task */"./src/task.js"),a=r(/*! ./base */"./src/base.js"),s=r(/*! ./advance */"./src/advance.js"),c=r(/*! ../package.json */"./package.json"),u={AppId:"",SecretId:"",SecretKey:"",SecurityToken:"",StartTime:0,ExpiredTime:0,ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1048576,SliceSize:1048576,CopyChunkParallelLimit:20,CopyChunkSize:10485760,CopySliceSize:10485760,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50,UseAccelerate:!1,ForceSignHost:!0,AutoSwitchHost:!0,CopySourceParser:null,ObjectKeySimplifyCheck:!0,DeepTracker:!1,TrackerDelay:5e3,CustomId:"",BeaconReporter:null,ClsReporter:null},l=function(e){if(this.options=n.extend(n.clone(u),e||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1048576,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1048576,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.EnableReporter=this.options.BeaconReporter||this.options.ClsReporter,this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),this.options.SecretId&&this.options.SecretId.indexOf(" ")>-1&&(console.error("error: SecretId格式错误，请检查"),console.error("error: SecretId format is incorrect. Please check")),this.options.SecretKey&&this.options.SecretKey.indexOf(" ")>-1&&(console.error("error: SecretKey格式错误，请检查"),console.error("error: SecretKey format is incorrect. Please check")),n.isNode()&&(console.log("Tip: Next.js、Nuxt.js 等服务端渲染技术可正常使用JavaScript SDK，请忽略下方 nodejs 环境警告"),console.warn("warning: cos-js-sdk-v5 不支持 nodejs 环境使用，请改用 cos-nodejs-sdk-v5，参考文档： https://cloud.tencent.com/document/product/436/8629"),console.warn("warning: cos-js-sdk-v5 does not support nodejs environment. Please use cos-nodejs-sdk-v5 instead. See: https://cloud.tencent.com/document/product/436/8629")),this.options.ForcePathStyle)throw console.warn("cos-js-sdk-v5不再支持使用path-style，仅支持使用virtual-hosted-style，参考文档：https://cloud.tencent.com/document/product/436/96243"),new Error("ForcePathStyle is not supported");o.init(this),i.init(this)};a.init(l,i),s.init(l,i),l.util={md5:n.md5,xml2json:n.xml2json,json2xml:n.json2xml,encodeBase64:n.encodeBase64},l.getAuthorization=n.getAuth,l.version=c.version,e.exports=l},"./src/event.js":
/*!**********************!*\
  !*** ./src/event.js ***!
  \**********************/
/*! no static exports found */function(e,t){var r=function(e){var t={},r=function(e){return!t[e]&&(t[e]=[]),t[e]};e.on=function(e,t){"task-list-update"===e&&console.warn('warning: Event "'+e+'" has been deprecated. Please use "list-update" instead.'),r(e).push(t)},e.off=function(e,t){for(var n=r(e),o=n.length-1;o>=0;o--)t===n[o]&&n.splice(o,1)},e.emit=function(e,t){for(var n=r(e).map((function(e){return e})),o=0;o<n.length;o++)n[o](t)}},n=function(){r(this)};e.exports.init=r,e.exports.EventProxy=n},"./src/session.js":
/*!************************!*\
  !*** ./src/session.js ***!
  \************************/
/*! no static exports found */function(e,t,r){var n,o,i=r(/*! ./util */"./src/util.js"),a="cos_sdk_upload_cache",s=2592e3,c=function(){try{var e=JSON.parse(localStorage.getItem(a))}catch(t){}e||(e=[]),n=e},u=function(){try{n.length?localStorage.setItem(a,JSON.stringify(n)):localStorage.removeItem(a)}catch(e){}},l=function(){if(!n){c.call(this);for(var e=!1,t=Math.round(Date.now()/1e3),r=n.length-1;r>=0;r--){var o=n[r][2];(!o||o+s<t)&&(n.splice(r,1),e=!0)}e&&u()}},d=function(){o||(o=setTimeout((function(){u(),o=null}),400))},p={using:{},setUsing:function(e){p.using[e]=!0},removeUsing:function(e){delete p.using[e]},getFileId:function(e,t,r,n){return e.name&&e.size&&e.lastModifiedDate&&t?i.md5([e.name,e.size,e.lastModifiedDate,t,r,n].join("::")):null},getCopyFileId:function(e,t,r,n,o){var a=t["content-length"],s=t.etag||"",c=t["last-modified"];return e&&r?i.md5([e,a,s,c,r,n,o].join("::")):null},getUploadIdList:function(e){if(!e)return null;l.call(this);for(var t=[],r=0;r<n.length;r++)n[r][0]===e&&t.push(n[r][1]);return t.length?t:null},saveUploadId:function(e,t,r){if(l.call(this),e){for(var o=n.length-1;o>=0;o--){var i=n[o];i[0]===e&&i[1]===t&&n.splice(o,1)}n.unshift([e,t,Math.round(Date.now()/1e3)]),n.length>r&&n.splice(r),d()}},removeUploadId:function(e){l.call(this),delete p.using[e];for(var t=n.length-1;t>=0;t--)n[t][1]===e&&n.splice(t,1);d()}};e.exports=p},"./src/task.js":
/*!*********************!*\
  !*** ./src/task.js ***!
  \*********************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./session */"./src/session.js"),o=r(/*! ./util */"./src/util.js"),i={},a=function(e,t){i[t]=e[t],e[t]=function(e,r){e.SkipTask?i[t].call(this,e,r):this._addTask(t,e,r)}},s=function(e){var t=[],r={},a=0,s=0,c=function(e){var t={id:e.id,Bucket:e.Bucket,Region:e.Region,Key:e.Key,FilePath:e.FilePath,state:e.state,loaded:e.loaded,size:e.size,speed:e.speed,percent:e.percent,hashPercent:e.hashPercent,error:e.error};return e.FilePath&&(t.FilePath=e.FilePath),e._custom&&(t._custom=e._custom),t},u=function(){var r,n=function(){r=0,e.emit("task-list-update",{list:o.map(t,c)}),e.emit("list-update",{list:o.map(t,c)})};return function(){r||(r=setTimeout(n))}}(),l=function(){if(!(t.length<=e.options.UploadQueueSize)){for(var n=0;n<s&&n<t.length&&t.length>e.options.UploadQueueSize;){var o="waiting"===t[n].state||"checking"===t[n].state||"uploading"===t[n].state;t[n]&&o?n++:(r[t[n].id]&&delete r[t[n].id],t.splice(n,1),s--)}u()}},d=function r(){if(!(a>=e.options.FileParallelLimit)){while(t[s]&&"waiting"!==t[s].state)s++;if(!(s>=t.length)){var n=t[s];s++,a++,n.state="checking",n.params.onTaskStart&&n.params.onTaskStart(c(n)),!n.params.UploadData&&(n.params.UploadData={});var d=o.formatParams(n.api,n.params);i[n.api].call(e,d,(function(t,o){e._isRunningTask(n.id)&&("checking"!==n.state&&"uploading"!==n.state||(n.state=t?"error":"success",t&&(n.error=t),a--,u(),r(),n.callback&&n.callback(t,o),"success"===n.state&&(n.params&&(delete n.params.UploadData,delete n.params.Body,delete n.params),delete n.callback)),l())})),u(),setTimeout(r)}}},p=function(t,o){var i=r[t];if(i){var s=i&&"waiting"===i.state,c=i&&("checking"===i.state||"uploading"===i.state);if("canceled"===o&&"canceled"!==i.state||"paused"===o&&s||"paused"===o&&c){i.state=o,e.emit("inner-kill-task",{TaskId:t,toState:o});try{var p=i&&i.params&&i.params.UploadData.UploadId}catch(h){}"canceled"===o&&p&&n.removeUsing(p),u(),c&&(a--,d()),"canceled"===o&&(i.params&&(delete i.params.UploadData,delete i.params.Body,delete i.params),delete i.callback)}l()}};e._addTasks=function(t){o.each(t,(function(t){e._addTask(t.api,t.params,t.callback,!0)})),u()};var h=!0;e._addTask=function(n,i,a,s){i=o.formatParams(n,i);var c=o.uuid();i.TaskId=c,i.onTaskReady&&i.onTaskReady(c),i.TaskReady&&(i.TaskReady(c),h&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),h=!1);var p={params:i,callback:a,api:n,index:t.length,id:c,Bucket:i.Bucket,Region:i.Region,Key:i.Key,FilePath:i.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:i._custom},f=i.onHashProgress;i.onHashProgress=function(t){e._isRunningTask(p.id)&&(p.hashPercent=t.percent,f&&f(t),u())};var g=i.onProgress;return i.onProgress=function(t){e._isRunningTask(p.id)&&("checking"===p.state&&(p.state="uploading"),p.loaded=t.loaded,p.speed=t.speed,p.percent=t.percent,g&&g(t),u())},o.getFileSize(n,i,(function(e,n){if(e)return a(o.error(e));r[c]=p,t.push(p),p.size=n,!s&&u(),d(),l()})),c},e._isRunningTask=function(e){var t=r[e];return!(!t||"checking"!==t.state&&"uploading"!==t.state)},e.getTaskList=function(){return o.map(t,c)},e.cancelTask=function(e){p(e,"canceled")},e.pauseTask=function(e){p(e,"paused")},e.restartTask=function(e){var t=r[e];!t||"paused"!==t.state&&"error"!==t.state||(t.state="waiting",u(),s=Math.min(s,t.index),d())},e.isUploadRunning=function(){return a||s<t.length}};e.exports.transferToTaskMethod=a,e.exports.init=s},"./src/tracker.js":
/*!************************!*\
  !*** ./src/tracker.js ***!
  \************************/
/*! no static exports found */function(e,t,r){var n=r(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=r(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),i=r(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js"),a=r(/*! ../package.json */"./package.json"),s=null,c=function(e,t){if(!s){if("function"!==typeof e)throw new Error("Beacon not found");s=new e({appkey:"0WEB05PY6MHRGK0U",versionCode:a.version,channelID:"js_sdk",openid:"openid",unionid:"unid",strictMode:!1,delay:t,sessionDuration:6e4})}return s},u=function(e){return!e||e<0?0:(e/1e3).toFixed(3)},l={getUid:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},getNetType:function(){if("object"===("undefined"===typeof navigator?"undefined":i(navigator))){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return(null===e||void 0===e?void 0:e.type)||(null===e||void 0===e?void 0:e.effectiveType)||"unknown"}return"unknown"},getProtocol:function(){return"object"===("undefined"===typeof location?"undefined":i(location))?location.protocol.replace(/:/,""):"unknown protocol"},getOsType:function(){if("object"!==("undefined"===typeof navigator?"undefined":i(navigator)))return"unknown os";var e=navigator.userAgent.toLowerCase(),t=/macintosh|mac os x/i.test(navigator.userAgent);return e.indexOf("win32")>=0||e.indexOf("wow32")>=0?"win32":e.indexOf("win64")>=0||e.indexOf("wow64")>=0?"win64":t?"mac":"unknown os"},isMobile:function(){var e=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i;return!("object"!==("undefined"===typeof navigator?"undefined":i(navigator))||!navigator.userAgent.match(e))},isAndroid:function(){var e=/(Android|Adr|Linux)/i;return!("object"!==("undefined"===typeof navigator?"undefined":i(navigator))||!navigator.userAgent.match(e))},isIOS:function(){var e=/(iPhone|iPod|iPad|iOS)/i;return!("object"!==("undefined"===typeof navigator?"undefined":i(navigator))||!navigator.userAgent.match(e))},isOtherMobile:function(){return d&&!isAndroid&&!isIOS},getUA:function(){if("object"!==("undefined"===typeof navigator?"undefined":i(navigator)))return"unknown device";var e=navigator.userAgent;return e}},d=l.isMobile(),p=l.isAndroid()?"android":l.isIOS?"ios":"other_mobile",h=l.getOsType(),f=d?p:h,g=l.getUA(),m=l.getProtocol(),y=function(e){return["putObject","sliceUploadFile","uploadFile","uploadFiles"].includes(e)?"UploadTask":"getObject"===e?"DownloadTask":["putObjectCopy","sliceCopyFile"].includes(e)?"CopyTask":e};function k(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()}function v(e){var t={},r=["sdkVersionName","sdkVersionCode","osName","networkType","requestName","requestResult","bucket","region","appid","accelerate","url","host","requestPath","userAgent","networkProtocol","httpMethod","httpSize","httpSpeed","httpTookTime","httpMd5","httpSign","httpFullTime","httpDomain","partNumber","httpRetryTimes","customId","traceId","realApi"],n=[].concat(r,["errorNode","errorCode","errorName","errorMessage","errorRequestId","errorHttpCode","errorServiceName","errorType","fullError"]),o="Success"===e.requestResult?r:n;for(var i in e)if(o.includes(i)){var a=k(i);t[a]=e[i]}return t["request_name"]=e.realApi?y(e.realApi):e.requestName,t}var C=function(){"use strict";function e(t){n(this,e);var r=t.parent,o=t.traceId,i=t.bucket,s=t.region,u=t.apiName,d=t.realApi,p=t.httpMethod,h=t.fileKey,y=t.fileSize,k=t.accelerate,v=t.customId,C=t.delay,b=t.deepTracker,x=t.Beacon,S=t.clsReporter,T=i&&i.substr(i.lastIndexOf("-")+1)||"";this.parent=r,this.deepTracker=b,this.delay=C,S&&!this.clsReporter&&(this.clsReporter=S),this.params={sdkVersionName:"cos-js-sdk-v5",sdkVersionCode:a.version,osName:f,networkType:"",requestName:u||"",requestResult:"",realApi:d,bucket:i,region:s,accelerate:k,httpMethod:p,url:"",host:"",httpDomain:"",requestPath:h||"",userAgent:g,networkProtocol:m,errorType:"",errorCode:"",errorName:"",errorMessage:"",errorRequestId:"",errorHttpCode:0,errorServiceName:"",errorNode:"",httpTookTime:0,httpSize:y||0,httpMd5:0,httpSign:0,httpFullTime:0,httpSpeed:0,md5StartTime:0,md5EndTime:0,signStartTime:0,signEndTime:0,httpStartTime:0,httpEndTime:0,startTime:(new Date).getTime(),endTime:0,traceId:o||l.getUid(),appid:T,partNumber:0,httpRetryTimes:0,customId:v||"",partTime:0},x&&(this.beacon=c(x,C))}return o(e,[{key:"formatResult",value:function(e,t){var r,n,o,i,a,s,c=(new Date).getTime(),d=l.getNetType(),p=e?(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e||null===(r=e.error)||void 0===r?void 0:r.code)||(null===e||void 0===e||null===(n=e.error)||void 0===n?void 0:n.Code):"",h=e?(null===e||void 0===e?void 0:e.message)||(null===e||void 0===e||null===(o=e.error)||void 0===o?void 0:o.message)||(null===e||void 0===e||null===(i=e.error)||void 0===i?void 0:i.Message):"",f=h,g=e?(null===e||void 0===e?void 0:e.resource)||(null===e||void 0===e||null===(a=e.error)||void 0===a?void 0:a.resource)||(null===e||void 0===e||null===(s=e.error)||void 0===s?void 0:s.Resource):"",m=e?null===e||void 0===e?void 0:e.statusCode:t.statusCode,y=e?(null===e||void 0===e?void 0:e.headers)&&(null===e||void 0===e?void 0:e.headers["x-cos-request-id"]):(null===t||void 0===t?void 0:t.headers)&&(null===t||void 0===t?void 0:t.headers["x-cos-request-id"]),k=e?y?"Server":"Client":"";"getObject"===this.params.requestName&&(this.params.httpSize=t?t.headers&&t.headers["content-length"]:0);var v="sliceUploadFile"===this.params.realApi,C="sliceCopyFile"===this.params.realApi;if(v||C){var b=this.params.httpSize/1024/this.params.partTime;Object.assign(this.params,{httpSpeed:b<0?0:b.toFixed(3)})}else{var x=c-this.params.startTime,S=this.params.httpEndTime-this.params.httpStartTime,T=this.params.httpSize/1024/(S/1e3),R=this.params.md5EndTime-this.params.md5StartTime,B=this.params.signEndTime-this.params.signStartTime;this.parent&&(this.parent.addParamValue("httpTookTime",u(S)),this.parent.addParamValue("httpFullTime",u(x)),this.parent.addParamValue("httpMd5",u(R)),this.parent.addParamValue("httpSign",u(B)),["multipartUpload","uploadPartCopy","putObjectCopy"].includes(this.params.requestName)&&this.parent.addParamValue("partTime",u(S))),Object.assign(this.params,{httpFullTime:u(x),httpMd5:u(R),httpSign:u(B),httpTookTime:u(S),httpSpeed:T<0?0:T.toFixed(3)})}if(Object.assign(this.params,{networkType:d,requestResult:e?"Failure":"Success",errorType:k,errorCode:p,errorHttpCode:m,errorName:f,errorMessage:h,errorServiceName:g,errorRequestId:y}),!e||p&&h||(this.params.fullError=e?JSON.stringify(e):""),this.params.url){try{var A=/^http(s)?:\/\/(.*?)\//.exec(this.params.url);this.params.host=A[2]}catch(P){this.params.host=this.params.url}this.params.httpDomain=this.params.host}}},{key:"report",value:function(e,t){if(this.beacon||this.clsReporter){this.formatResult(e,t);var r=v(this.params);this.beacon&&this.sendEventsToBeacon(r),this.clsReporter&&this.sendEventsToCLS(r)}}},{key:"setParams",value:function(e){Object.assign(this.params,e)}},{key:"addParamValue",value:function(e,t){this.params[e]=(+this.params[e]+ +t).toFixed(3)}},{key:"sendEventsToBeacon",value:function(e){var t="sliceUploadFile"===this.params.requestName||"sliceUploadFile"===this.params.realApi;if(!t||this.deepTracker){var r="qcloud_track_cos_sdk";0===this.delay?this.beacon&&this.beacon.onDirectUserAction(r,e):this.beacon&&this.beacon.onUserAction(r,e)}}},{key:"sendEventsToCLS",value:function(e){var t=!(0!==this.delay);this.clsReporter.log(e,t)}},{key:"generateSubTracker",value:function(t){return Object.assign(t,{parent:this,deepTracker:this.deepTracker,traceId:this.params.traceId,bucket:this.params.bucket,region:this.params.region,accelerate:this.params.accelerate,fileKey:this.params.requestPath,customId:this.params.customId,delay:this.delay,clsReporter:this.clsReporter}),new e(t)}}]),e}();e.exports=C},"./src/util.js":
/*!*********************!*\
  !*** ./src/util.js ***!
  \*********************/
/*! no static exports found */function(e,t,r){"use strict";(function(t){var n=r(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js");function o(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw a}}}}function i(e,t){if(e){if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=r(/*! ../lib/md5 */"./lib/md5.js"),c=r(/*! ../lib/crypto */"./lib/crypto.js"),u=r(/*! fast-xml-parser */"./node_modules/fast-xml-parser/src/fxp.js"),l=u.XMLParser,d=u.XMLBuilder,p=new l({ignoreDeclaration:!0,ignoreAttributes:!0,parseTagValue:!1}),h=new d,f=r(/*! ../lib/base64 */"./lib/base64.js"),g=r(/*! ./tracker */"./src/tracker.js"),m=function(e){var t=p.parse(e);return t},y=function(e){var t=h.build(e);return t};function k(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function v(e,t){var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(t?k(n).toLowerCase():n);return r.sort((function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e===t?0:e>t?1:-1}))}var C=function(e,t){var r,n,o,i=[],a=v(e);for(r=0;r<a.length;r++)n=a[r],o=void 0===e[n]||null===e[n]?"":""+e[n],n=t?k(n).toLowerCase():k(n),o=k(o)||"",i.push(n+"="+o);return i.join("&")},b=["cache-control","content-disposition","content-encoding","content-length","content-md5","expect","expires","host","if-match","if-modified-since","if-none-match","if-unmodified-since","origin","range","transfer-encoding","pic-operations"],x=function(e){var t={};for(var r in e){var n=r.toLowerCase();(n.indexOf("x-cos-")>-1||b.indexOf(n)>-1)&&(t[r]=e[r])}return t},S=function(e){e=e||{};var t,r=e.SecretId,n=e.SecretKey,o=e.KeyTime,i=(e.method||e.Method||"get").toLowerCase(),a=N(e.Query||e.params||{}),s=x(N(e.Headers||e.headers||{})),u=e.Key||"";e.UseRawKey?t=e.Pathname||e.pathname||"/"+u:(t=e.Pathname||e.pathname||u,0!==t.indexOf("/")&&(t="/"+t));var l=!1!==e.ForceSignHost;if(!s.Host&&!s.host&&e.Bucket&&e.Region&&l&&(s.Host=e.Bucket+".cos."+e.Region+".myqcloud.com"),!r)throw new Error("missing param SecretId");if(!n)throw new Error("missing param SecretKey");var d=Math.round(Z(e.SystemClockOffset)/1e3)-1,p=d,h=e.Expires||e.expires;p+=void 0===h?900:1*h||0;var f="sha1",g=r,m=o||d+";"+p,y=o||d+";"+p,k=v(s,!0).join(";").toLowerCase(),C=v(a,!0).join(";").toLowerCase(),b=c.HmacSHA1(y,n).toString(),S=[i,t,ue.obj2str(a,!0),ue.obj2str(s,!0),""].join("\n"),T=["sha1",m,c.SHA1(S).toString(),""].join("\n"),R=c.HmacSHA1(T,b).toString(),B=["q-sign-algorithm="+f,"q-ak="+g,"q-sign-time="+m,"q-key-time="+y,"q-header-list="+k,"q-url-param-list="+C,"q-signature="+R].join("&");return B},T=function(e,t,r){var n=t/8,o=e.slice(r,r+n);return new Uint8Array(o).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[t](o)[0]},R=function(e,t,r,n){var o=e.slice(t,r),i="";return new Uint8Array(o).forEach((function(e){i+=String.fromCharCode(e)})),n&&(i=decodeURIComponent(escape(i))),i},B=function(e){var t={},r=R(e),n={records:[]};while(e.byteLength){var o,i=T(e,32,0),a=T(e,32,4),s=i-a-16,c=0;e=e.slice(12);while(c<a){var u=T(e,8,c),l=R(e,c+1,c+1+u),d=T(e,16,c+u+2),p=R(e,c+u+4,c+u+4+d);t[l]=p,c+=u+4+d}if("Records"===t[":event-type"])o=R(e,c,c+s,!0),n.records.push(o);else if("Stats"===t[":event-type"])o=R(e,c,c+s,!0),n.stats=ue.xml2json(o).Stats;else if("error"===t[":event-type"]){var h=t[":error-code"],f=t[":error-message"],g=new Error(f);g.message=f,g.name=g.code=h,n.error=g}else["Progress","Continuation","End"].includes(t[":event-type"]);e=e.slice(c+s+4)}return{payload:n.records.join(""),body:r}},A=function(e){var t=this.options.CopySourceParser;if(t)return t(e);var r=e.match(/^([^.]+-\d+)\.cos(v6|-cdc|-cdz|-internal)?\.([^.]+)\.((myqcloud\.com)|(tencentcos\.cn))\/(.+)$/);return r?{Bucket:r[1],Region:r[3],Key:r[7]}:null},P=function(){},w=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&void 0!==e[r]&&null!==e[r]&&(t[r]=e[r]);return t},E=function(e,t){var r,n=new FileReader;FileReader.prototype.readAsBinaryString?(r=FileReader.prototype.readAsBinaryString,n.onload=function(){t(this.result)}):FileReader.prototype.readAsArrayBuffer?r=function(e){var r="",n=new FileReader;n.onload=function(e){for(var o=new Uint8Array(n.result),i=o.byteLength,a=0;a<i;a++)r+=String.fromCharCode(o[a]);t(r)},n.readAsArrayBuffer(e)}:console.error("FileReader not support readAsBinaryString"),r.call(n,e)},O=function(){var e=function(e,t){e=e.split("."),t=t.split(".");for(var r=0;r<t.length;r++)if(e[r]!==t[r])return parseInt(e[r])>parseInt(t[r])?1:-1;return 0},t=function(t){if(!t)return!1;var r=(t.match(/Chrome\/([.\d]+)/)||[])[1],n=(t.match(/QBCore\/([.\d]+)/)||[])[1],o=(t.match(/QQBrowser\/([.\d]+)/)||[])[1],i=r&&e(r,"53.0.2785.116")<0&&n&&e(n,"3.53.991.400")<0&&o&&e(o,"9.0.2524.400")<=0||!1;return i};return t("undefined"!==typeof navigator&&navigator.userAgent)}(),I=function(e,t,r,n,o){var i;if(e.slice?i=e.slice(t,r):e.mozSlice?i=e.mozSlice(t,r):e.webkitSlice&&(i=e.webkitSlice(t,r)),n&&O){var a=new FileReader;a.onload=function(e){i=null,o(new Blob([a.result]))},a.readAsArrayBuffer(i)}else o(i)},j=function(e,t,r,n){r=r||P,e?"string"===typeof t?r(ue.md5(t,!0)):Blob&&t instanceof Blob?ue.getFileMd5(t,(function(e,t){r(t)}),n):r():r()},_=1048576,U=function(e,t,r){var n=e.size,o=0,i=s.getCtx(),a=function a(s){if(s>=n){var c=i.digest("hex");t(null,c)}else{var u=Math.min(n,s+_);ue.fileSlice(e,s,u,!1,(function(e){E(e,(function(t){e=null,i=i.update(t,!0),o+=t.length,t=null,r&&r({loaded:o,total:n,percent:Math.round(o/n*1e4)/1e4}),a(s+_)}))}))}};a(0)};function N(e){return z(e,(function(e){return"object"===n(e)&&null!==e?N(e):e}))}function D(e,t,r){return e&&t in e?e[t]:r}function M(e,t){return H(t,(function(r,n){e[n]=t[n]})),e}function L(e){return e instanceof Array}function F(e,t){for(var r=!1,n=0;n<e.length;n++)if(t===e[n]){r=!0;break}return r}function K(e){return L(e)?e:[e]}function H(e,t){for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)}function z(e,t){var r=L(e)?[]:{};for(var n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n],n));return r}function q(e,t){var r=L(e),n=r?[]:{};for(var o in e)e.hasOwnProperty(o)&&t(e[o],o)&&(r?n.push(e[o]):n[o]=e[o]);return n}var G=function(e){var t,r,n,o="";for(t=0,r=e.length/2;t<r;t++)n=parseInt(e[2*t]+e[2*t+1],16),o+=String.fromCharCode(n);return btoa(o)},V=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},W=function(e,t){var r=t.Bucket,n=t.Region,o=t.Key,i=this.options.Domain,a=!i||"string"===typeof i&&i.indexOf("{Bucket}")>-1,s=!i||"string"===typeof i&&i.indexOf("{Region}")>-1;if(e.indexOf("Bucket")>-1||"deleteMultipleObject"===e||"multipartList"===e||"listObjectVersions"===e){if(a&&!r)return"Bucket";if(s&&!n)return"Region"}else if(e.indexOf("Object")>-1||e.indexOf("multipart")>-1||"sliceUploadFile"===e||"abortUploadTask"===e||"uploadFile"===e){if(a&&!r)return"Bucket";if(s&&!n)return"Region";if(!o)return"Key"}return!1},$=function(e,t){if(t=M({},t),"getAuth"!==e&&"getV4Auth"!==e&&"getObjectUrl"!==e){var r=t.Headers||{};if(t&&"object"===n(t)){(function(){for(var e in t)t.hasOwnProperty(e)&&e.indexOf("x-cos-")>-1&&(r[e]=t[e])})();var o={"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-mime-limit":"MimeLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext","Pic-Operations":"PicOperations","x-cos-callback":"Callback","x-cos-callback-var":"CallbackVar","x-cos-return-body":"ReturnBody"};ue.each(o,(function(e,n){void 0!==t[e]&&(r[n]=t[e])})),t.Headers=w(r)}}return t},Q=function(e,t){return function(r,n){var o,i=this;if("function"===typeof r&&(n=r,r={}),r=$(e,r),i.options.EnableReporter)if("sliceUploadFile"===r.calledBySdk||"sliceCopyFile"===r.calledBySdk)o=r.tracker&&r.tracker.generateSubTracker({apiName:e});else if(["uploadFile","uploadFiles"].includes(e))o=null;else{var a=0;r.Body&&(a="string"===typeof r.Body?r.Body.length:r.Body.size||r.Body.byteLength||0);var s=i.options.UseAccelerate||"string"===typeof i.options.Domain&&i.options.Domain.includes("accelerate.");o=new g({Beacon:i.options.BeaconReporter,clsReporter:i.options.ClsReporter,bucket:r.Bucket,region:r.Region,apiName:e,realApi:e,accelerate:s,fileKey:r.Key,fileSize:a,deepTracker:i.options.DeepTracker,customId:i.options.CustomId,delay:i.options.TrackerDelay})}r.tracker=o;var c=function(e){return e&&e.headers&&(e.headers["x-cos-request-id"]&&(e.RequestId=e.headers["x-cos-request-id"]),e.headers["x-ci-request-id"]&&(e.RequestId=e.headers["x-ci-request-id"]),e.headers["x-cos-version-id"]&&(e.VersionId=e.headers["x-cos-version-id"]),e.headers["x-cos-delete-marker"]&&(e.DeleteMarker=e.headers["x-cos-delete-marker"])),e},u=function(e,t){o&&o.report(e,t),n&&n(c(e),c(t))},l=function(){if("getService"!==e&&"abortUploadTask"!==e){var t=W.call(i,e,r);if(t)return"missing param "+t;if(r.Region){if(i.options.CompatibilityMode){if(!/^([a-z\d-.]+)$/.test(r.Region))return"Region format error."}else{if(r.Region.indexOf("cos.")>-1)return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(r.Region))return"Region format error."}i.options.CompatibilityMode||-1!==r.Region.indexOf("-")||"yfb"===r.Region||"default"===r.Region||"accelerate"===r.Region||console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(r.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(r.Bucket))if(r.AppId)r.Bucket=r.Bucket+"-"+r.AppId;else{if(!i.options.AppId)return'Bucket should format as "test-1250000000".';r.Bucket=r.Bucket+"-"+i.options.AppId}r.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete r.AppId)}!i.options.UseRawKey&&r.Key&&"/"===r.Key.substr(0,1)&&(r.Key=r.Key.substr(1))}},d=l(),p=["getAuth","getObjectUrl"].includes(e);if("function"===typeof Promise&&!p&&!n)return new Promise((function(e,o){if(n=function(t,r){t?o(t):e(r)},d)return u(ue.error(new Error(d)));t.call(i,r,u)}));if(d)return u(ue.error(new Error(d)));var h=t.call(i,r,u);return p?h:void 0}},J=function(e,t){var r,n,o=this,i=0,a=0,s=Date.now();function c(){if(n=0,t&&"function"===typeof t){r=Date.now();var o,c=Math.max(0,Math.round((a-i)/((r-s)/1e3)*100)/100)||0;o=0===a&&0===e?1:Math.floor(a/e*100)/100||0,s=r,i=a;try{t({loaded:a,total:e,speed:c,percent:o})}catch(u){}}}return function(t,r){if(t&&(a=t.loaded,e=t.total),r)clearTimeout(n),c();else{if(n)return;n=setTimeout(c,o.options.ProgressInterval)}}},X=function(e,t,r){var n;"string"===typeof t.Body?t.Body=new Blob([t.Body],{type:"text/plain"}):t.Body instanceof ArrayBuffer&&(t.Body=new Blob([t.Body])),t.Body&&(t.Body instanceof Blob||"[object File]"===t.Body.toString()||"[object Blob]"===t.Body.toString())?(n=t.Body.size,t.ContentLength=n,r(null,n)):r(ue.error(new Error("params body format error, Only allow File|Blob|String.")))},Z=function(e){return Date.now()+(e||0)},Y=function(e,t){var r=e;return e.message=e.message||null,"string"===typeof t?(e.error=t,e.message=t):"object"===n(t)&&null!==t&&(M(e,t),(t.code||t.name)&&(e.code=t.code||t.name),t.message&&(e.message=t.message),t.stack&&(e.stack=t.stack)),"function"===typeof Object.defineProperty&&(Object.defineProperty(e,"name",{writable:!0,enumerable:!1}),Object.defineProperty(e,"message",{enumerable:!0})),e.name=t&&t.name||e.name||e.code||"Error",e.code||(e.code=e.name),e.error||(e.error=N(r)),e},ee=function(){return"object"===("undefined"===typeof globalThis?"undefined":n(globalThis))&&("DedicatedWorkerGlobalScope"===globalThis.constructor.name||globalThis.FileReaderSync)},te=function(){return"object"!==("undefined"===typeof window?"undefined":n(window))&&"object"===("undefined"===typeof t?"undefined":n(t))&&!ee()},re=function(e){return/^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(e)},ne=function(){if("object"!==("undefined"===typeof navigator?"undefined":n(navigator)))return!1;var e=navigator.userAgent,t=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return t}(),oe=function(){return"object"===("undefined"===typeof navigator?"undefined":n(navigator))&&/\sQQ/i.test(navigator.userAgent)}(),ie=function(e,t){var r=f.encode(e);return t&&(r=r.replaceAll("+","-").replaceAll("/","_").replaceAll("=","")),r},ae=function(e){return e?f.decode(e):""},se=function(e){var t,r=e.split("/"),n=[],i=o(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;".."===a?n.length&&n.pop():a.length&&"."!==a&&n.push(a)}}catch(s){i.e(s)}finally{i.f()}return"/"+n.join("/")},ce=function(e){var t;if(e&&"string"===typeof e){var r=e.trim(),n=0===r.indexOf("<"),o=0===r.indexOf("{");if(n)t=ue.xml2json(e)||{};else if(o)try{var i=e.replace(/\n/g," "),a=JSON.parse(i);t="[object Object]"===Object.prototype.toString.call(a)?a:e}catch(s){t=e}else t=e}else t=e||{};return t},ue={noop:P,formatParams:$,apiWrapper:Q,xml2json:m,json2xml:y,md5:s,clearKey:w,fileSlice:I,getBodyMd5:j,getFileMd5:U,b64:G,extend:M,isArray:L,isInArray:F,makeArray:K,each:H,map:z,filter:q,clone:N,attr:D,uuid:V,camSafeUrlEncode:k,throttleOnProgress:J,getFileSize:X,getSkewTime:Z,error:Y,obj2str:C,getAuth:S,parseSelectPayload:B,getSourceParams:A,isBrowser:!0,isNode:te,isCIHost:re,isIOS_QQ:ne&&oe,encodeBase64:ie,decodeBase64:ae,simplifyPath:se,readAsBinaryString:E,parseResBody:ce};e.exports=ue}).call(this,r(/*! ./../node_modules/process/browser.js */"./node_modules/process/browser.js"))}})}))},"4e3e":function(e,t,r){"use strict";var n=r("23e7"),o=r("2266"),i=r("825a");n({target:"Iterator",proto:!0,real:!0},{forEach:function(e){o(i(this),e,void 0,!1,!0)}})},6832:function(e,t,r){},"8a0dd":function(e,t,r){},a2e2:function(e,t,r){"use strict";r("6832")},e95a:function(e,t,r){var n=r("b622"),o=r("3f8c"),i=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},f43e:function(e,t,r){"use strict";function n(e){let t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.remove()}r.d(t,"a",(function(){return n}))},f5dfe:function(e,t,r){var n=r("00ee"),o=r("c6b6"),i=r("b622"),a=i("toStringTag"),s="Arguments"==o(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(r){}};e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=c(t=Object(e),a))?r:s?o(t):"Object"==(n=o(t))&&"function"==typeof t.callee?"Arguments":n}},f988:function(e,t,r){"use strict";function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){let t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)}))}r.d(t,"a",(function(){return n}))}}]);