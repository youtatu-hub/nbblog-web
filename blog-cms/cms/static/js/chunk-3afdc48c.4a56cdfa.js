(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3afdc48c"],{4020:function(e,t,r){"use strict";var o=r("bc3a"),n=r.n(o),a=r("323e"),s=r.n(a),c=(r("a5d8"),r("5c96"));const i=n.a.create({baseURL:"/api/admin/",timeout:5e3});let l=n.a.CancelToken;i.interceptors.request.use(e=>{const t=window.localStorage.getItem("user")||"{}",r=JSON.parse(t);if("{}"!==t&&"ROLE_admin"!==r.role&&"get"!==e.method)return e.cancelToken=new l((function(e){e("演示模式，不允许操作")})),e;s.a.start();const o=window.localStorage.getItem("token");return o&&(e.headers.Authorization=o),e},e=>(console.info(e),Promise.reject(e))),i.interceptors.response.use(e=>{s.a.done();const t=e.data;if(200!==t.code){let e=t.msg||"Error";return c["Message"].error(e),Promise.reject(new Error(e))}return t},e=>(console.info(e),c["Message"].error(e.message),Promise.reject(e))),t["a"]=i},e3eb:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"formRef",attrs:{model:e.form,rules:e.formRules,"label-position":"top"}},[r("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"标题",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-row",{staticStyle:{width:"50%"},attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"网易云歌曲ID",prop:"musicId"}},[r("el-input",{attrs:{type:"number",placeholder:"请输入网易云歌曲ID（可选）"},model:{value:e.form.musicId,callback:function(t){e.$set(e.form,"musicId",t)},expression:"form.musicId"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"评论开关"}},[r("el-switch",{attrs:{"active-text":"评论"},model:{value:e.form.commentEnabled,callback:function(t){e.$set(e.form,"commentEnabled",t)},expression:"form.commentEnabled"}})],1)],1)],1),r("el-form-item",{attrs:{label:"正文",prop:"content"}},[r("mavon-editor",{model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),r("el-form-item",{staticStyle:{"text-align":"right"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.submit}},[e._v("保存")])],1)],1)],1)},n=[],a=r("6350"),s=r("4020");function c(){return Object(s["a"])({url:"about",method:"GET"})}function i(e){return Object(s["a"])({url:"about",method:"PUT",data:{...e}})}var l={name:"About",components:{Breadcrumb:a["a"]},data(){return{form:{title:"",musicId:null,content:"",commentEnabled:!0},formRules:{title:[{required:!0,message:"请输入标题",trigger:"change"}]}}},created(){this.getData()},methods:{getData(){c().then(e=>{this.form.title=e.data.title,this.form.musicId=e.data.musicId,this.form.content=e.data.content,this.form.commentEnabled="true"===e.data.commentEnabled})},submit(){this.$refs.formRef.validate(e=>{if(!e)return this.msgError("请填写必要的表单");{const e=/^\d{1,}$/;if(!e.test(this.form.musicId))return this.msgError("歌曲ID有误");i(this.form).then(e=>{this.msgSuccess(e.msg)})}})}}},m=l,u=r("2877"),d=Object(u["a"])(m,o,n,!1,null,"76caae6d",null);t["default"]=d.exports}}]);