(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e8a0276"],{"4f37":function(e,t,n){},"8dbf":function(e,t,n){"use strict";n("4f37")},aaef:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.hintShow?n("el-alert",{attrs:{title:"图床配置及用法请查看：https://github.com/Naccl/PictureHosting",type:"warning","show-icon":""}}):e._e(),n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("GitHub配置")])]),n("el-row",[n("el-col",[n("el-input",{staticStyle:{"min-width":"500px"},attrs:{placeholder:"请输入token进行初始化",clearable:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchGithubUser(t)}},model:{value:e.githubToken,callback:function(t){e.githubToken=t},expression:"githubToken"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchGithubUser},slot:"append"},[e._v("查询")])],1)],1)],1),n("el-row",[n("el-col",[n("span",{staticClass:"middle"},[e._v("当前用户：")]),n("el-avatar",{attrs:{size:50,src:e.githubUserInfo.avatar_url}},[e._v("User")]),n("span",{staticClass:"middle"},[e._v(e._s(e.githubUserInfo.login))])],1)],1),n("el-row",[n("el-col",[n("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-check",disabled:!e.isGithubSave},on:{click:function(t){return e.saveGithub(!0)}}},[e._v("保存配置")]),n("el-button",{attrs:{type:"info",size:"medium",icon:"el-icon-close"},on:{click:function(t){return e.saveGithub(!1)}}},[e._v("清除配置")])],1)],1)],1),n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("又拍云存储配置")])]),n("el-form",{attrs:{model:e.upyunConfig,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"操作员名称"}},[n("el-input",{model:{value:e.upyunConfig.username,callback:function(t){e.$set(e.upyunConfig,"username",t)},expression:"upyunConfig.username"}})],1),n("el-form-item",{attrs:{label:"操作员密码"}},[n("el-input",{model:{value:e.upyunConfig.password,callback:function(t){e.$set(e.upyunConfig,"password",t)},expression:"upyunConfig.password"}})],1),n("el-form-item",{attrs:{label:"存储空间名"}},[n("el-input",{model:{value:e.upyunConfig.bucketName,callback:function(t){e.$set(e.upyunConfig,"bucketName",t)},expression:"upyunConfig.bucketName"}})],1),n("el-form-item",{attrs:{label:"CDN访问域名"}},[n("el-input",{model:{value:e.upyunConfig.domain,callback:function(t){e.$set(e.upyunConfig,"domain",t)},expression:"upyunConfig.domain"}})],1),n("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-check",disabled:!e.isUpyunSave},on:{click:function(t){return e.saveUpyun(!0)}}},[e._v("保存配置")]),n("el-button",{attrs:{type:"info",size:"medium",icon:"el-icon-close"},on:{click:function(t){return e.saveUpyun(!1)}}},[e._v("清除配置")])],1)],1),n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("腾讯云存储配置")])]),n("el-form",{attrs:{model:e.txyunConfig,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"secret-id"}},[n("el-input",{model:{value:e.txyunConfig.secretId,callback:function(t){e.$set(e.txyunConfig,"secretId",t)},expression:"txyunConfig.secretId"}})],1),n("el-form-item",{attrs:{label:"secret-key"}},[n("el-input",{model:{value:e.txyunConfig.secretKey,callback:function(t){e.$set(e.txyunConfig,"secretKey",t)},expression:"txyunConfig.secretKey"}})],1),n("el-form-item",{attrs:{label:"存储空间名"}},[n("el-input",{model:{value:e.txyunConfig.bucketName,callback:function(t){e.$set(e.txyunConfig,"bucketName",t)},expression:"txyunConfig.bucketName"}})],1),n("el-form-item",{attrs:{label:"地域"}},[n("el-input",{model:{value:e.txyunConfig.region,callback:function(t){e.$set(e.txyunConfig,"region",t)},expression:"txyunConfig.region"}})],1),n("el-form-item",{attrs:{label:"CDN访问域名"}},[n("el-input",{model:{value:e.txyunConfig.domain,callback:function(t){e.$set(e.txyunConfig,"domain",t)},expression:"txyunConfig.domain"}})],1),n("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-check",disabled:!e.isTxyunSave},on:{click:function(t){return e.saveTxyun(!0)}}},[e._v("保存配置")]),n("el-button",{attrs:{type:"info",size:"medium",icon:"el-icon-close"},on:{click:function(t){return e.saveTxyun(!1)}}},[e._v("清除配置")])],1)],1)],1)},i=[],s=n("c9f7"),u={name:"Setting",data(){return{githubToken:"",githubUserInfo:{login:"未配置"},isGithubSave:!1,hintShow:!1,upyunConfig:{username:"",password:"",bucketName:"",domain:""},txyunConfig:{secretId:"",secretKey:"",bucketName:"",region:"",domain:""}}},computed:{isUpyunSave(){return this.upyunConfig.username&&this.upyunConfig.password&&this.upyunConfig.bucketName&&this.upyunConfig.domain},isTxyunSave(){return this.txyunConfig.secretId&&this.txyunConfig.secretKey&&this.txyunConfig.bucketName&&this.txyunConfig.region&&this.txyunConfig.domain}},created(){this.githubToken=localStorage.getItem("githubToken");const e=localStorage.getItem("githubUserInfo");this.githubToken&&e?(this.githubUserInfo=JSON.parse(e),this.isGithubSave=!0):this.githubUserInfo={login:"未配置"};const t=localStorage.getItem("upyunConfig");t&&(this.upyunConfig=JSON.parse(t));const n=localStorage.getItem("txyunConfig");n&&(this.txyunConfig=JSON.parse(n));const o=window.localStorage.getItem("user")||"{}",i=JSON.parse(o);"{}"!==o&&"ROLE_admin"!==i.role&&(this.hintShow=!0)},methods:{searchGithubUser(){Object(s["c"])(this.githubToken).then(e=>{this.githubUserInfo=e,this.isGithubSave=!0})},saveGithub(e){e?(localStorage.setItem("githubToken",this.githubToken),localStorage.setItem("githubUserInfo",JSON.stringify(this.githubUserInfo)),this.msgSuccess("保存成功")):(localStorage.removeItem("githubToken"),localStorage.removeItem("githubUserInfo"),this.msgSuccess("清除成功"))},saveUpyun(e){e?(localStorage.setItem("upyunToken",btoa(`${this.upyunConfig.username}:${this.upyunConfig.password}`)),localStorage.setItem("upyunConfig",JSON.stringify(this.upyunConfig)),this.msgSuccess("保存成功")):(localStorage.removeItem("upyunConfig"),this.msgSuccess("清除成功"))},saveTxyun(e){e?(localStorage.setItem("txyunConfig",JSON.stringify(this.txyunConfig)),this.msgSuccess("保存成功")):(localStorage.removeItem("txyunConfig"),this.msgSuccess("清除成功"))}}},a=u,r=(n("8dbf"),n("2877")),l=Object(r["a"])(a,o,i,!1,null,"894db83a",null);t["default"]=l.exports},c9f7:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return g}));var o=n("bc3a"),i=n.n(o),s=n("323e"),u=n.n(s),a=(n("a5d8"),n("5c96"));const r=i.a.create({baseURL:"https://api.github.com",timeout:3e4});function l(e){return r({url:"/user",method:"GET",headers:{Authorization:"token "+e}})}function c(e){return r({url:`/users/${e}/repos`,method:"GET"})}function f(e,t,n){return r({url:`/repos/${e}/${t}/contents${n}`,method:"GET"})}function m(e,t,n,o){return r({url:`/repos/${e}/${t}/contents/${n}`,method:"DELETE",data:o})}function g(e,t,n,o,i){return r({url:`/repos/${e}/${t}/contents${n}/${o}`,method:"PUT",data:i})}r.interceptors.request.use(e=>{u.a.start(),/get/i.test(e.method)&&(e.params=e.params||{},e.params.t=(new Date).getTime());const t=localStorage.getItem("githubToken");return t&&(e.headers.Authorization="token "+t),e},e=>(console.info(e),Promise.reject(e))),r.interceptors.response.use(e=>(u.a.done(),e.data),e=>(console.info(e),a["Message"].error(e.message),Promise.reject(e)))}}]);